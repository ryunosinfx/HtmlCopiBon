!function(t){var e={};function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dest/",i(i.s=12)}([function(t,e,i){"use strict";i.d(e,"a",function(){return n});const a="./dest/worker.js";class n{constructor(t=a){this.worker=new Worker(t)}postMessage(t,e){return new Promise((i,a)=>{const{transObject:s,tranceArray:r}=n.buildPostObj(t,e);this.worker.postMessage(s,r),this.worker.onmessage=(t=>{i(t.data)}),this.worker.onerror=(t=>{a(t)})})}static buildPostObj(t,e){const i=[],a={key:t};if(e){if(Array.isArray(e)){let t=0;for(let e of dataList)e.buffer?i.push(e.buffer):e.byteLength&&i.push(e),a[t]=e,t++}else if("object"==typeof e&&Object.keys(e).length>0)for(let t in Object.keys(e)){const n=e[e];a[t]=n,n.buffer?i.push(n.buffer):n.byteLength&&i.push(n)}}else;return{transObject:a,tranceArray:i}}close(){this.worker.terminate()}}},function(t,e,i){"use strict";function a(t,e,i,a,n){return{sel:t,data:e,children:i,text:a,elm:n,key:void 0===e?void 0:e.key}}Object.defineProperty(e,"__esModule",{value:!0}),e.vnode=a,e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),n=i(13);function s(t,e){var i,r=void 0!==e?e:n.default;if(r.isElement(t)){var o,l=t.id?"#"+t.id:"",c=t.getAttribute("class"),h=c?"."+c.split(" ").join("."):"",d=r.tagName(t).toLowerCase()+l+h,u={},g=[],m=void 0,p=void 0,f=t.attributes,y=t.childNodes;for(m=0,p=f.length;m<p;m++)"id"!==(o=f[m].nodeName)&&"class"!==o&&(u[o]=f[m].nodeValue);for(m=0,p=y.length;m<p;m++)g.push(s(y[m]));return a.default(d,{attrs:u},g,void 0,t)}return r.isText(t)?(i=r.getTextContent(t),a.default(void 0,void 0,void 0,i,t)):r.isComment(t)?(i=r.getTextContent(t),a.default("!",{},[],i,t)):a.default("",{},[],void 0,t)}e.toVNode=s,e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),n=i(14);function s(t,e,i){var s,r,o,l={};if(void 0!==i?(l=e,n.array(i)?s=i:n.primitive(i)?r=i:i&&i.sel&&(s=[i])):void 0!==e&&(n.array(e)?s=e:n.primitive(e)?r=e:e&&e.sel?s=[e]:l=e),n.array(s))for(o=0;o<s.length;++o)n.primitive(s[o])&&(s[o]=a.vnode(void 0,void 0,void 0,s[o],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||function t(e,i,a){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==a&&void 0!==i)for(var n=0;n<i.length;++n){var s=i[n].data;void 0!==s&&t(s,i[n].children,i[n].sel)}}(l,s,t),a.vnode(t,l,s,r,void 0)}e.h=s,e.default=s},function(t,e,i){"use strict";function a(t,e){var i=t.type,a=e.data.on;a&&a[i]&&function t(e,i,a){if("function"==typeof e)e.call(i,a,i);else if("object"==typeof e)if("function"==typeof e[0])if(2===e.length)e[0].call(i,e[1],a,i);else{var n=e.slice(1);n.push(a),n.push(i),e[0].apply(i,n)}else for(var s=0;s<e.length;s++)t(e[s])}(a[i],e,t)}function n(t,e){var i,n=t.data.on,s=t.listener,r=t.elm,o=e&&e.data.on,l=e&&e.elm;if(n!==o){if(n&&s)if(o)for(i in n)o[i]||r.removeEventListener(i,s,!1);else for(i in n)r.removeEventListener(i,s,!1);if(o){var c=e.listener=t.listener||function t(e){a(e,t.vnode)};if(c.vnode=e,n)for(i in o)n[i]||l.addEventListener(i,c,!1);else for(i in o)l.addEventListener(i,c,!1)}}}Object.defineProperty(e,"__esModule",{value:!0}),e.eventListenersModule={create:n,update:n,destroy:n},e.default=e.eventListenersModule},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=/[A-Z]/g;function n(t,e){var i,n=e.elm,s=t.data.dataset,r=e.data.dataset;if((s||r)&&s!==r){s=s||{},r=r||{};var o=n.dataset;for(i in s)r[i]||(o?i in o&&delete o[i]:n.removeAttribute("data-"+i.replace(a,"-$&").toLowerCase()));for(i in r)s[i]!==r[i]&&(o?o[i]=r[i]:n.setAttribute("data-"+i.replace(a,"-$&").toLowerCase(),r[i]))}}e.datasetModule={create:n,update:n},e.default=e.datasetModule},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a="http://www.w3.org/1999/xlink",n="http://www.w3.org/XML/1998/namespace",s=58,r=120;function o(t,e){var i,o=e.elm,l=t.data.attrs,c=e.data.attrs;if((l||c)&&l!==c){for(i in l=l||{},c=c||{}){var h=c[i];l[i]!==h&&(!0===h?o.setAttribute(i,""):!1===h?o.removeAttribute(i):i.charCodeAt(0)!==r?o.setAttribute(i,h):i.charCodeAt(3)===s?o.setAttributeNS(n,i,h):i.charCodeAt(5)===s?o.setAttributeNS(a,i,h):o.setAttribute(i,h))}for(i in l)i in c||o.removeAttribute(i)}}e.attributesModule={create:o,update:o},e.default=e.attributesModule},function(t,e,i){"use strict";function a(t,e){var i,a,n=e.elm,s=t.data.props,r=e.data.props;if((s||r)&&s!==r){for(i in s=s||{},r=r||{},s)r[i]||delete n[i];for(i in r)a=r[i],s[i]===a||"value"===i&&n[i]===a||(n[i]=a)}}Object.defineProperty(e,"__esModule",{value:!0}),e.propsModule={create:a,update:a},e.default=e.propsModule},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,n=function(t){a(function(){a(t)})};function s(t,e,i){n(function(){t[e]=i})}function r(t,e){var i,a,n=e.elm,r=t.data.style,o=e.data.style;if((r||o)&&r!==o){r=r||{},o=o||{};var l="delayed"in r;for(a in r)o[a]||("-"===a[0]&&"-"===a[1]?n.style.removeProperty(a):n.style[a]="");for(a in o)if(i=o[a],"delayed"===a&&o.delayed)for(var c in o.delayed)i=o.delayed[c],l&&i===r.delayed[c]||s(n.style,c,i);else"remove"!==a&&i!==r[a]&&("-"===a[0]&&"-"===a[1]?n.style.setProperty(a,i):n.style[a]=i)}}e.styleModule={create:r,update:r,destroy:function(t){var e,i,a=t.elm,n=t.data.style;if(n&&(e=n.destroy))for(i in e)a.style[i]=e[i]},remove:function(t,e){var i=t.data.style;if(i&&i.remove){var a,n=t.elm,s=0,r=i.remove,o=0,l=[];for(a in r)l.push(a),n.style[a]=r[a];for(var c=getComputedStyle(n)["transition-property"].split(", ");s<c.length;++s)-1!==l.indexOf(c[s])&&o++;n.addEventListener("transitionend",function(t){t.target===n&&--o,0===o&&e()})}else e()}},e.default=e.styleModule},function(t,e,i){"use strict";function a(t,e){var i,a,n=e.elm,s=t.data.class,r=e.data.class;if((s||r)&&s!==r){for(a in s=s||{},r=r||{},s)r[a]||n.classList.remove(a);for(a in r)(i=r[a])!==s[a]&&n.classList[i?"add":"remove"](a)}}Object.defineProperty(e,"__esModule",{value:!0}),e.classModule={create:a,update:a},e.default=e.classModule},,function(t,e,i){"use strict";function a(t,e,i,a,n){return{sel:t,data:e,children:i,text:a,elm:n,key:void 0===e?void 0:e.key}}i.r(e);var n=a,s=Array.isArray;function r(t){return"string"==typeof t||"number"==typeof t}var o={createElement:function(t){return document.createElement(t)},createElementNS:function(t,e){return document.createElementNS(t,e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,i){t.insertBefore(e,i)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},getTextContent:function(t){return t.textContent},isElement:function(t){return 1===t.nodeType},isText:function(t){return 3===t.nodeType},isComment:function(t){return 8===t.nodeType}};function l(t,e,i){var n,o,l,c={};if(void 0!==i?(c=e,s(i)?n=i:r(i)?o=i:i&&i.sel&&(n=[i])):void 0!==e&&(s(e)?n=e:r(e)?o=e:e&&e.sel?n=[e]:c=e),s(n))for(l=0;l<n.length;++l)r(n[l])&&(n[l]=a(void 0,void 0,void 0,n[l],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||function t(e,i,a){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==a&&void 0!==i)for(var n=0;n<i.length;++n){var s=i[n].data;void 0!==s&&t(s,i[n].children,i[n].sel)}}(c,n,t),a(t,c,n,o,void 0)}function c(t,e){e.elm=t.elm,t.data.fn=e.data.fn,t.data.args=e.data.args,e.data=t.data,e.children=t.children,e.text=t.text,e.elm=t.elm}function h(t){var e=t.data;c(e.fn.apply(void 0,e.args),t)}function d(t,e){var i,a=t.data,n=e.data,s=a.args,r=n.args;if(a.fn===n.fn&&s.length===r.length){for(i=0;i<r.length;++i)if(s[i]!==r[i])return void c(n.fn.apply(void 0,r),e);c(t,e)}else c(n.fn.apply(void 0,r),e)}var u=function(t,e,i,a){return void 0===a&&(a=i,i=e,e=void 0),l(t,{key:e,hook:{init:h,prepatch:d},fn:i,args:a})};function g(t){return void 0===t}function m(t){return void 0!==t}i.d(e,"init",function(){return v}),i.d(e,"h",function(){return l}),i.d(e,"thunk",function(){return u});var p=n("",{},[],void 0,void 0);function f(t,e){return t.key===e.key&&t.sel===e.sel}function y(t,e,i){var a,n,s,r={};for(a=e;a<=i;++a)null!=(s=t[a])&&void 0!==(n=s.key)&&(r[n]=a);return r}var w=["create","update","remove","destroy","pre","post"];function v(t,e){var i,a,l={},c=void 0!==e?e:o;for(i=0;i<w.length;++i)for(l[w[i]]=[],a=0;a<t.length;++a){var h=t[a][w[i]];void 0!==h&&l[w[i]].push(h)}function d(t,e){return function(){if(0==--e){var i=c.parentNode(t);c.removeChild(i,t)}}}function u(t,e){var i,a=t.data;void 0!==a&&m(i=a.hook)&&m(i=i.init)&&(i(t),a=t.data);var n=t.children,o=t.sel;if("!"===o)g(t.text)&&(t.text=""),t.elm=c.createComment(t.text);else if(void 0!==o){var h=o.indexOf("#"),d=o.indexOf(".",h),f=h>0?h:o.length,y=d>0?d:o.length,w=-1!==h||-1!==d?o.slice(0,Math.min(f,y)):o,v=t.elm=m(a)&&m(i=a.ns)?c.createElementNS(i,w):c.createElement(w);for(f<y&&v.setAttribute("id",o.slice(f+1,y)),d>0&&v.setAttribute("class",o.slice(y+1).replace(/\./g," ")),i=0;i<l.create.length;++i)l.create[i](p,t);if(s(n))for(i=0;i<n.length;++i){var b=n[i];null!=b&&c.appendChild(v,u(b,e))}else r(t.text)&&c.appendChild(v,c.createTextNode(t.text));m(i=t.data.hook)&&(i.create&&i.create(p,t),i.insert&&e.push(t))}else t.elm=c.createTextNode(t.text);return t.elm}function v(t,e,i,a,n,s){for(;a<=n;++a){var r=i[a];null!=r&&c.insertBefore(t,u(r,s),e)}}function b(t){var e,i,a=t.data;if(void 0!==a){for(m(e=a.hook)&&m(e=e.destroy)&&e(t),e=0;e<l.destroy.length;++e)l.destroy[e](t);if(void 0!==t.children)for(i=0;i<t.children.length;++i)null!=(e=t.children[i])&&"string"!=typeof e&&b(e)}}function A(t,e,i,a){for(;i<=a;++i){var n=void 0,s=void 0,r=void 0,o=e[i];if(null!=o)if(m(o.sel)){for(b(o),s=l.remove.length+1,r=d(o.elm,s),n=0;n<l.remove.length;++n)l.remove[n](o,r);m(n=o.data)&&m(n=n.hook)&&m(n=n.remove)?n(o,r):r()}else c.removeChild(t,o.elm)}}function P(t,e,i){var a,n;m(a=e.data)&&m(n=a.hook)&&m(a=n.prepatch)&&a(t,e);var s=e.elm=t.elm,r=t.children,o=e.children;if(t!==e){if(void 0!==e.data){for(a=0;a<l.update.length;++a)l.update[a](t,e);m(a=e.data.hook)&&m(a=a.update)&&a(t,e)}g(e.text)?m(r)&&m(o)?r!==o&&function(t,e,i,a){for(var n,s,r,o=0,l=0,h=e.length-1,d=e[0],m=e[h],p=i.length-1,w=i[0],b=i[p];o<=h&&l<=p;)null==d?d=e[++o]:null==m?m=e[--h]:null==w?w=i[++l]:null==b?b=i[--p]:f(d,w)?(P(d,w,a),d=e[++o],w=i[++l]):f(m,b)?(P(m,b,a),m=e[--h],b=i[--p]):f(d,b)?(P(d,b,a),c.insertBefore(t,d.elm,c.nextSibling(m.elm)),d=e[++o],b=i[--p]):f(m,w)?(P(m,w,a),c.insertBefore(t,m.elm,d.elm),m=e[--h],w=i[++l]):(void 0===n&&(n=y(e,o,h)),g(s=n[w.key])?(c.insertBefore(t,u(w,a),d.elm),w=i[++l]):((r=e[s]).sel!==w.sel?c.insertBefore(t,u(w,a),d.elm):(P(r,w,a),e[s]=void 0,c.insertBefore(t,r.elm,d.elm)),w=i[++l]));(o<=h||l<=p)&&(o>h?v(t,null==i[p+1]?null:i[p+1].elm,i,l,p,a):A(t,e,o,h))}(s,r,o,i):m(o)?(m(t.text)&&c.setTextContent(s,""),v(s,null,o,0,o.length-1,i)):m(r)?A(s,r,0,r.length-1):m(t.text)&&c.setTextContent(s,""):t.text!==e.text&&c.setTextContent(s,e.text),m(n)&&m(a=n.postpatch)&&a(t,e)}}return function(t,e){var i,a,s,r=[];for(i=0;i<l.pre.length;++i)l.pre[i]();for(function(t){return void 0!==t.sel}(t)||(t=function(t){var e=t.id?"#"+t.id:"",i=t.className?"."+t.className.split(" ").join("."):"";return n(c.tagName(t).toLowerCase()+e+i,{},[],void 0,t)}(t)),f(t,e)?P(t,e,r):(a=t.elm,s=c.parentNode(a),u(e,r),null!==s&&(c.insertBefore(s,e.elm,c.nextSibling(a)),A(s,[t],0,0))),i=0;i<r.length;++i)r[i].data.hook.insert(r[i]);for(i=0;i<l.post.length;++i)l.post[i]();return e}}},function(t,e,i){"use strict";i.r(e);i(19);class a{constructor(){}static create(t,e,i){return a.ce("div",t,e,i)}static createInput(t,e,i){return a.ce("input",t,e,i)}static createText(t,e,i){return a.ce("text",t,e,i)}static createFile(t,e,i){return a.ce("input",t,e,i,"file")}static createCanvas(t,e,i){return a.ce("canvas",t,e,i)}static createImage(t,e,i){return a.ce("img",t,e,i)}static createUl(t,e,i){return a.ce("ul",t,e,i)}static createLabel(t,e,i,n){const s=a.ce("label",t,e,i);return s.setAttribute("for",n),s}static createLi(t,e,i){return a.ce("li",t,e,i)}static createSpan(t,e,i){return a.ce("span",t,e,i)}static createStrong(t,e,i){return a.ce("strong",t,e,i)}static createA(t,e,i){return a.ce("a",t,e,i)}static ce(t,e,i,a,n){const s=document.createElement(t);return s.className=i,e&&(s.id=e),"input"===t&&a?(s.setAttribute("value",a),n&&s.setAttribute("type",n)):a&&(s.textContent=a),s}static on(t,e,i){t.addEventListener(e,i,!1)}static off(t,e,i){t.removeEventListener(e,i,!1)}static append(t,e){t.appendChild(e)}static insertFirst(t,e){t.hasChildNodes()?t.insertBefore(e,t.childNodes[0]):t.appendChild(e)}static getBodyElm(){return document.getElementsByTagName("body")[0]}static attachBody(t){document.getElementsByTagName("body")[0].appendChild(t)}static detacthBodyById(t){const e=documet.getElementById(t);document.getElementsByTagName("body")[0].removeChild(e)}static removeChild(t){t.parentNode.removeChild(t)}static remove(t){const e=documet.getElementById(t);e.parentNode&&e.parentNode.removeChild(e)}static removeChildren(t){const e=documet.getElementById(t);for(;e.firstChild;)e.removeChild(e.firstChild)}static setStyles(t,e){for(let i in e)t.style[i]=e[i]}static text(t,e){t.textContent=e}static emit(t,e,i=!0,a=!0){const n=document.createEvent("HTMLEvents");return n.initEvent(e,i,a),t.dispatchEvent(n)}}var n=i(9),s=i.n(n),r=i(8),o=i.n(r),l=i(7),c=i.n(l),h=i(6),d=i.n(h),u=i(5),g=i.n(u),m=i(4),p=i.n(m),f=i(3),y=i.n(f),w=i(2),v=i.n(w);let b=i(11);console.log(b);const A=y.a,P=(v.a,b.init([s.a,o.a,c.a,d.a,g.a,p.a])),D=[];class x{static addBaseCLassese(t){if(t)if(Array.isArray(t))for(let e of t)D.push(e);else D.push(t)}static deepClone(t){const e=new MessageChannel,i=e.port1,a=e.port2;return new Promise(e=>{i.onmessage=(t=>{e(t.data)}),a.postMessage(t)})}static simpleDeepCloneSerialized(t){return JSON.parse(JSON.stringify(t))}static simpleDeepClone(t,e){const i=e||(Array.isArray(t)?[]:{});for(let e in t){const a=t[e];if(a&&"object"==typeof a&&!a.byteLength){let t=null;for(let e of D)if(a instanceof e){t=new e;break}i[e]=x.simpleDeepClone(a,t)}else try{i[e]=a}catch(t){throw console.log(t),console.log(i),t}}return i}static singleDeepClone(t){const e={};for(let i in t){let a=t[i];e[i]=a}return e}static singleDeepCloneWithoutFuncs(t){const e={};for(let i in t){let a=t[i];"function"!=typeof a&&(e[i]=a)}return e}static deepVnodeClone(t){if(!t)return t;const e={sel:t.sel,data:x.simpleDeepClone(t.data),children:void 0,text:t.text,elm:t.elm,key:t.key};for(let i in t.data)t.data[i]&&(e.data[i]=t.data[i]);if(t.children&&t.children.length>0){e.children=[];for(let i of t.children)e.children.push(x.deepVnodeClone(i))}return e}}class B{constructor(){this.selectorMap=new Map}getElementById(t,e){let i=this.getElements(t,"#"+e);return i.length<1?null:i[0]}getElementsByClass(t,e){return this.getElements(t,"."+e)}patch(t,e,i){if(!i&&"string"==typeof e)return console.log("patch00a ★ERROR★ of Patch newNode:"+i+"/selector:"+e),t;if(!i){this.isValidNode(t,"vnode");P(t,e);return e}if(!e){this.isValidNode(t,"vnode");P(t,i);return i}const a=this.prePatch(t,e,i);P(t,a),this.getElements(a,e,!1,new Map,null);return this.isValidNode(a,"cloneNode"),a}isValidNode(t,e,i,a){if(t){if(t.elm&&!t.elm.parentNode){if(i){i.childNodes.length>a?t.elm=i.childNodes[a]:i.appendChild(t.elm)}}else if(!t.elm&&i){const e=i.childNodes.length;e>a?t.elm=i.childNodes[a]:console.log("★★★invalid parent index!"+a+"/length:"+e+"/vnode.sel:"+t.sel)}if(t.children)for(let i in t.children){let a=t.children[i];a&&this.isValidNode(a,e+"_c_",t.elm?t.elm.parentNode:null,i)}}else console.log("★★null node!"+e+"/parentNode:"+i)}prePatch(t,e,i){const a=x.deepVnodeClone(t),n=new Map,s=this.getElements(a,e,!1,n,null);let r=!1;for(let t of s){let e=x.deepVnodeClone(i);for(let[i,a]of n)if(i===t){let i=a.children;for(let a in i){if(i[a]===t){i[a]=e,r=!0;break}}break}}return r?a:t}getElements(t,e,i=!1,a=new Map,n){let s=[];if(!e||"string"!=typeof e)return s;let r=e.split(/ |>/),o=e;if(r.length>=1){let l=r.shift();if(!l)return s;if(this.isMatch(t.sel,l)){if(r.length<1)return s.push(t),n&&a.set(t,n),s;o=e.substring(l.length+1,e.length)}else{if(i)return s;o=e}if(!t.children)return s;let c=">"===e.substring(l.length,l.length+1);for(let e of t.children)s=s.concat(this.getElements(e,o,c,a,t))}return s}getSelectorMap(t){let e=this.selectorMap.get(t);if(e)return e;if(e=new Map,!t)return e;const i=t.split(/\.|#/g),a=t.indexOf("#")>=0?t.split(/#/g)[1].split(/\./g)[0]:"",n=[];let s="",r="";for(let e of i)a===e?s=e:t.indexOf("."+e)>=0?n.push(e):r=e;return e.set("id",s),e.set("class",n),e.set("tag",r),this.selectorMap.set(t,e),e}isMatch(t,e){const i=this.getSelectorMap(t),a=this.getSelectorMap(e),n=a.get("tag"),s=a.get("id");if(""!==n&&i.get("tag")!==n)return!1;if(""!==s&&i.get("id")!==s)return!1;const r=i.get("class"),o=a.get("class");for(let t of o){let e=!1;for(let i of r)t===i&&(e=!0);if(!1===e)return!1}return""!==e}}const S=["Attach"];class k{constructor(){}static getBaseActions(){return S}static createAction(t,e,i=null){return{type:t,data:e,storeKey:i}}static createBaseAction(t,e,i,a=null){const n=i&&"object"==typeof i?i:{};return n.targetView=e,n.selector=e?e.id:null,n.storeKey=a,{type:t,data:n}}static creatAttachAction(t,e,i,a=null){const n=i&&"object"==typeof i?i:{};return n.parentView=t,n.selector=e.id,n.storeKey=a,{type:"Attach",data:n}}static createShowViewAction(t,e,i,a,n=null){return k.createGoOtherViewAction(t,null,e,i,a,n)}static createGoOtherViewAction(t,e,i,a,n,s=null){let r=n;return e||i?(n||(r={}),r.view=e,r.oldVnode=i,r.selector=a,{type:t,data:r,storeKey:s}):(console.log("createGoOtherViewAction is null!"),{type:t,data:r,storeKey:s})}static isEquals(t,e){return!(!t||!e||t.type!==e.type)}}const I={},N=[];class E{constructor(){this.queue=[]}addActiveView(t,e,i){const a=t.id,n=e.id,s=this.findActivViews(I,a);if(s&&s.primaryView){const t=s[n];t&&t.primaryView?(t.primaryView=e,t.parent=s):i?(i.parent=s,s[n]=i):s[n]={primaryView:e,parent:s}}else I[n]=i||{primaryView:e,parent:I};this.loadAllActiveViews()}changeActiveView(t,e,i){const a=t.id,n=this.findActivViews(I,a);if(!n)return;const s=n.parent;delete s[a];const r=e.id;return i&&i.primaryView?(s[r]=i,i.primaryView=e,i.parent=s):s[r]={primaryView:e,parent:s},this.loadAllActiveViews(),n}removeActiveView(t){const e=t.id,i=this.findActivViews(I,e);if(i)return delete i.parent[e],this.loadAllActiveViews(),i}findActivViews(t,e,i,a){let n=null;const s=a?a+1:1;if(s>5)return null;if(t)for(let a in t){if(void 0===a||"undefined"===a||"parent"===a||"primaryView"===a)continue;const r=t[a];r.primaryView&&r.parent&&(i&&i(r),a===e?n=r:r&&"view"!==a&&"0"!==a&&(n=this.findActivViews(r,e,i,s)))}return n}loadAllActiveViews(){const t=[];this.findActivViews(I,"all",e=>{t.push(e)});const e=N.length;for(let t=0;t<e;t++)N.pop();for(let e of t)e.primaryView&&e.parent&&N.push(e.primaryView);return N}getActiveViewList(){return N}}const V=new Map,T="aaa";class C{constructor(t){}static getStore(t){const e=t||T,i=V.has(e)?V.get(e):null,a=i?x.simpleDeepClone(i):{};return a.oldVnode=i?i.oldVnode:null,a}static setStore(t,e){const i=e||T,a=t?x.simpleDeepClone(t):{};a.oldVnode=t?t.oldVnode:null,V.set(i,a)}}const O=new E,L=new Map;class K{constructor(t){this.view=t,this.updateMap=new Map,this.updateQueue=[]}static add(t,e){if(!t)return!1;const i=t.type;if(!i)return!1;if(L.has(i)){const t=L.get(i);if(t.includes(e))return!1;t.push(e)}else L.set(i,[e]);return!0}static remove(t){const e=t.type;if(!e)return!1;if(L.has(e)){const t=L.get(e);if(t.includes(reducer))return!1;{const e=t.indexof(reducer);t.splice(e,1)}}return!0}async dispatch(t){const e=t.type;if(!e)return!1;const i=t.data,a=t.storeKey;let n=C.getStore(a),s=this.view;if(L.has(e)){const i=L.get(e);for(let a of i)console.log("A01 dispatch type:"+e+"/reducer.reduce:"+a.reduce),await a.preReduce(n,t).catch(t=>{console.log(t)}),await a.reduce(n,t).catch(t=>{console.log(t)}),await a.postReduce(n,t).catch(t=>{console.log(t)});console.log("A01 dispatch type:"+e+"/"+i[0]),console.log(i[0]),C.setStore(n)}let r=C.getStore(a);if(console.log("A01 dispatch "),console.log(r),n.isOrverride&&t.data.view){if(s=t.data.views,!1===this.view.onViewHide(s,i))return;this.callUpdate(s,i,a),this.view.onViewHidden(s,i)}else this.callUpdate(s,i,a);return!0}callUpdate(t,e,i){const a=O.getActiveViewList();for(let n of a){const a=C.getStore(i);if(t===n){console.log("A0 callUpdate update id:"+n.id);const i=t.updateReactiveTheTargetView(a,e);if(i){if(!i.then)return void alert("your view has override method name 'updateReactiveTheTargetView'! activeView.id):"+n.id);i.then(()=>{},t=>{console.log(t)})}else console.log(n)}else{console.log("A0 callUpdate updateReactive id:"+n.id);const t=n.updateReactive(a,e);if(t){if(!t.then)return void alert("your view has override method name 'updateReactive'! activeView.id):"+n.id);t.then(()=>{},t=>{console.log(t)})}else console.log(n)}}}callUpdateExecute(t){t()}}class R{constructor(){}static create(t){return new K(t)}static createStandAlone(){return new K(!1)}}const _=(t,e)=>{let i={};t&&"object"==typeof t?(t.props||(t.props={}),i=t):i={props:{}};for(let t in e)i.props[t]=e[t];return i},M=(t,e,i,a={},n,s)=>{const r=t+(e&&"string"==typeof e?"#"+e:"")+(i?Array.isArray(i)&&i.length>0&&"string"==typeof i[0]?"."+i.join("."):Array.isArray(e)&&e.length>0&&"string"==typeof e[0]?"."+e.join("."):"":""),o=n&&Array.isArray(n)?n:a&&Array.isArray(a)?a:Array.isArray(i)&&i.length>0&&"object"==typeof i[0]?i:[],l=s||(n&&"string"==typeof n?n:a&&"string"==typeof a?a:i&&"string"==typeof i?i:"");let c="string"==typeof a||Array.isArray(a)?{}:a;void 0!==n&&void 0===s&&i&&!Array.isArray(i)&&"object"==typeof i?c=i:void 0===n&&void 0===s&&e&&!Array.isArray(e)&&"object"==typeof e&&(c=e);Object.prototype.toString;const h=o.length>0?o:l;return A(r,c,h)},U=(t,e,i,a,n)=>M("div",t,e,i,a,n),j=(t,e,i,a,n)=>M("span",t,e,i,a,n),F=(t,e,i,a,n)=>M("img",t,e,_(n,{alt:i,src:a}),null,null),W=(t,e,i,a,n)=>M("input",t,e,_(i,{type:"file"}),null,n),z=(t,e,i,a,n)=>M("input",t,e,_(i,{type:a,value:n}),null,n),H=(t,e,i,a,n)=>M("option",t,e,i,a,n),Y=(t,e,i,a,n,s="")=>{const r=[],o=Array.isArray(a);for(let t in a){const e=a[t];if(!o&&t===n||o&&e+""==n+""){const i=H("",[""],{attrs:{value:o?e:t,selected:"true"}},e+s);r.push(i)}else{const i=H("",[""],{attrs:{value:o?e:t}},e+s);r.push(i)}}return((t,e,i,a,n)=>M("select",t,e,i,a,n))(t,e,{props:{name:i}},r)};class X{constructor(){}static getGotoAnotherViewAction(t,e,i){return t||console.log("getGotoAnotherViewAction view:"+t),k.createGoOtherViewAction("GotoAnotherView",t,null,e,i)}static getShowViewAction(t,e,i){return t||console.log("getShowViewAction oldVnode:"+t),k.createShowViewAction("ShowView",t,e,i)}}class q{constructor(t){if(this.isBaseUse=t,t){const t=k.getBaseActions();for(let e in t){const i=t[e];this.atatch({type:i})}}}atatch(t){K.add(t,this)}detach(t){K.delete(t,this)}async preReduce(t,e){return t.isOrverride=!1,t}async reduce(t,e){return t.isOrverride=!0,t.oldVnode=e.data.oldVnode,t.selector="#"+e.data.selector,t}async postReduce(t,e){return t}}new q(!0);new class extends q{constructor(){super(),this.atatch(X.getGotoAnotherViewAction()),this.atatch(X.getShowViewAction())}async reduce(t,e){return k.isEquals(X.getGotoAnotherViewAction(),e)||k.isEquals(X.getShowViewAction(),e)&&(t.isOrverride=!0,t.oldVnode=e.data.oldVnode,t.selector="#"+e.data.selector),t}};const G=new E,J={rootVnode:null,ms:null};class ${constructor(t,e,i=!1){this.dispatcher=R.create(this),this.id=t,this.className=e,this.isNotRenderWrap=i,this.ms=J.ms,this.es=new B;const a=C.getStore();this.onViewLoad(a),this.currentVnode=null,this.onViewLoaded(a),this.updateReactiveCallCount=0,this.updateReactiveCallTimer=null,this.updateCount=0}static setRootVnode(t){J.rootVnode=t}static setMainService(t){t&&(J.ms=t)}patch(t,e){return this.patchFromOtherVnode(J.rootVnode,t,e)}initialPatch(){document.getElementsByTagName("body")[0].innerHTML='<div id="rootNodeA"><p>ｘ</p></div>';let t=document.getElementById("rootNodeA");this.patchFromOtherVnode(t,null,this.render()),this.updateReactiveTheTargetView({oldVnode:this.currentVnode,selector:null,isOrverride:!0}).catch(t=>{console.log(t)})}patchFromOtherVnode(t,e,i){let a=null!==e?J.rootVnode:t,n=e,s=i;const r=this.es.patch(a,n,s);return r.data.name=this.name+Date.now(),J.rootVnode=r,this.currentVnode=this.es.getElements(r,"#"+this.id)[0],r}prePatch(t,e){return this.currentVnode||(this.currentVnode=this.es.getElements(J.rootVnode,"#"+this.id)[0]),this.currentVnode||console.log("!!!!prePatch nodeFrame.rootVnode: "+JSON.stringify(J.rootVnode)),console.log("!!A!!prePatch "+JSON.stringify(this.currentVnode)+"/this.id:"+this.id+"/selector:"+t+"/"+this.es.getElements(this.currentVnode,t)[0]),this.currentVnode.data.name=this.name+Date.now(),this.currentVnode=this.es.prePatch(this.currentVnode,t,e),this.currentVnode}async updateReactiveTheTargetView(t,e){const i=t.oldVnode,a=t.selector,n=t.isOrverride;console.log("A00 update --oldVnode:"+i+"/isOrverride="+n+"/selector="+a+"/this.currentVnode:"+this.currentVnode+"/"+typeof this.currentVnode),n?(this.onPreViewBuild(i,t),this.currentVnode=this.currentVnode?this.currentVnode:this.renderWrap(t)):this.currentVnode||(this.currentVnode=this.es.getElements(result,"#"+this.id)[0]),await this.onViewShow(t,e).catch(t=>{console.log(t)}),n?i?this.patchFromOtherVnode(i,a,this.currentVnode):this.patchFromOtherVnode(null,"#"+this.id,this.currentVnode):this.patch("#"+this.id,this.currentVnode),this.updateCount++,console.log("this.id:"+this.id),this.updateCount<=2?this.onAfterAttachWrap(t,e):setTimeout(()=>{this.updateCount=0}),await this.onViewShown(t,e).catch(t=>{console.log(t)})}async updateReactive(t,e){this.updateReactiveCallTimer&&clearTimeout(this.updateReactiveCallTimer),this.updateReactiveCallTimer=setTimeout(async()=>{t.oldVnode,t.selector,t.isOrverride;this.currentVnode=this.currentVnode=this.es.getElements(J.rootVnode,"#"+this.id)[0],await this.onViewShow(t,e).catch(t=>{console.log(t)}),this.patch("#"+this.id,this.currentVnode),await this.onViewShown(t,e).catch(t=>{console.log(t)})})}init(){}attach(t=this.parentView,e,i){this.parentView=t;let a=e;if(e||(console.log("★attach selector is null :"+e+"/this.id:"+this.id),a=this.id),this.isAttached())return void alert("attached!!!");const n=C.getStore();this.onPreViewBuild(n),this.activeViewTree=G.addActiveView(t,this,this.activeViewTree);const s=k.creatAttachAction(t,this,i);this.dispatch(s)}isAttached(){return this.es.getElements(J.rootVnode,"#"+this.id)[0]===this.currentVnode}dispatch(t){this.dispatcher.dispatch(t),console.log("dispatchered /this.id:"+this.id)}getElementById(t){const e=this.es.getElements(this.currentVnode,"#"+t);return e&&e.length>0?e[0]:null}onAfterAttachWrap(t,e){this.updateCount++,this.updateCount>2||this.onAfterAttach(t,e)}onAfterAttach(t,e){this.currentVnode}changeAnotherView(t,e,i){this.onViewHide(i,store,actionData);const a=k.creatAttachAction(t,this,data);this.dispatch(a),this.onViewHidden(i,store,actionData)}onViewLoad(t,e){console.log("m001 baseView.onViewLoad name:"+name+"/actionData:"+e)}onViewLoaded(t,e){console.log("m002 baseView.onViewLoaded name:"+name+"/actionData:"+e)}onPreViewBuild(t,e){console.log("m003a baseView.onPreViewBuild store:"+t+"/actionData:"+e)}async onViewShow(t,e){console.log("m003 baseView.onViewShow newNode:/store:"+t)}async onViewShown(t,e){console.log("m004 baseView.onViewShown newNode:/store:"+t)}async onViewHide(t,e,i){return console.log("m005 baseView.onViewHide nextView:"+t+"/actionData:"+i),!0}async onViewHidden(t,e,i){console.log("m006 baseView.onViewHidden nextView:"+t+"/actionData:"+i)}render(){return a.create("BaseView","BaseView")}renderWrap(t,e){return this.isNotRenderWrap?this.render(t,e):U(this.id,[this.className],{},[this.render(t,e)])}getAnker(){return this.elm}}class Z extends ${constructor(t){super("header","header"),this.titleText=t}render(){return U("aaa",{style:{color:"#000"}},[U("title",["title"],this.titleText)])}}class Q extends ${constructor(){super("menu","Menu"),this.text="Menu",this.menuButtonClass="MenuButton",this.selected="",this.idOfStep0="step0",this.idOfStep1="step1",this.idOfStep2="step2",this.idOfStep3="step3",this.idOfStep4="step4"}render(){return U(this.id+"Frame",["MenuFrame"],this.createButtons())}onClick(t){return e=>{alert("onClick id:"+t)}}createButtons(){const t=[];return t.push(U("",[this.menuButtonClass],{on:{click:this.onClick(this.idOfStep0)}},"Step0 Select or New")),t.push(U("",[this.menuButtonClass],{on:{click:this.onClick(this.idOfStep1)}},"Step1 Work Setting")),t.push(U("",[this.menuButtonClass],{on:{click:this.onClick(this.idOfStep2)}},"Step2 Select Files")),t.push(U("",[this.menuButtonClass],{on:{click:this.onClick(this.idOfStep3)}},"Step3 Export")),t.push(U("",[this.menuButtonClass],{on:{click:this.onClick(this.idOfStep4)}},"Step4 Pref")),t}}class tt{constructor(){}static creatAddAction(t,e,i=null){return k.createBaseAction("addProgressBar",t,e,i)}static creatRemoveAction(t,e,i=null){return k.createBaseAction("removeProgressBar",t,e,i)}static creatUpdateAction(t,e,i=null){return k.createBaseAction("updateProgressBar",t,e,i)}static creatCompleatAction(t,e,i=null){return k.createBaseAction("compleatProgressBar",t,e,i)}}var et={dbName:"CopiBon",ua:navigator.userAgent.replace(/[\.0-9]+/g,"x"),domain:window.location};class it{static currentTables(t,e){return e||[t]}static isMutch(t,e){if(void 0===e||null===e)return!1;if(Array.isArray(e)){for(let i of e)if(it.isMutch(t,i))return!0;return!1}for(let i in e){let a=e[i];if("object"==typeof a){if(it.isMutch(t,a))return!0}else{if(t[i]!==a)return!1}}return!0}static makeKeyRange(t,e,i,a){return void 0===i&&void 0===a?IDBKeyRange.bound(t,e,!1,!1):IDBKeyRange.bound(t,e,i,a)}static makeKeyRangeUpper(t,e){return!0!==e?IDBKeyRange.upperBound(t):IDBKeyRange.upperBound(t,e)}static makeKeyRangeLower(t,e){return!0!==isNotEqualStart?KeyRange.lowerBound(t):IDBKeyRange.lowerBound(t,e)}static makeKeyRangeOnly(t){return!0!==isNotEqualStart?IDBKeyRange.only(t):IDBKeyRange.lowerBound(end,isNotEqualEnd)}static buildKeyPath(t,e,i,a,n){let s=[];return void 0!==t&&s.push((t+"").split("&").join("&amp;").split(".").join("&#046;")),void 0!==e&&s.push((e+"").split("&").join("&amp;").split(".").join("&#046;")),void 0!==i&&s.push((i+"").split("&").join("&amp;").split(".").join("&#046;")),void 0!==a&&s.push((a+"").split("&").join("&amp;").split(".").join("&#046;")),void 0!==n&&s.push((n+"").split("&").join("&amp;").split(".").join("&#046;")),s.join("")}}const at="readonly",nt="readwrite";class st{constructor(t){this.IDBKeyRange=window.IDBKeyRange,this.indexedDB=window.indexedDB,this.dbName=t,this.keyPathMap={}}getOpenDB(t){return new Promise((e,i)=>{let a=this.indexedDB.open(this.dbName,t);a.onsuccess=(t=>{e(t.target.result)}),a.onupgradeneeded=(t=>{e(t.target.result)}),a.onabort=(t=>{e(t)}),a.onerror=(t=>{i(t)})})}getObjectStore(t,e,i,a){let n=t.transaction(i,a);return n.oncomplete=(e=>{t.close()}),n.onerror=(e=>{t.close()}),n.objectStore(e)}throwNewError(){return t=>{throw t.stack?console.log(t.stack):console.log(t.message,t),new Error(t)}}getKeyPathByMap(t){return this.keyPathMap[t]}async getKeyPath(t){let e=this.keyPathMap[t];if(void 0!==e&&null!==e)return e;const i=await this.getOpenDB().catch(this.throwNewError());let a=this.getObjectStore(i,t,[t],at);i.close();let n=a.keyPath;return this.keyPathMap[t]=n,n}async getCurrentVersion(){let t=await this.getOpenDB().catch(this.throwNewError());const e=t.version;return t.close(),e}async selectAll(t){let{tableName:e,range:i,condetions:a}=t;return await this._selectAll(e,i,a)}async _selectAll(t,e,i){const a=await this.getOpenDB().catch(this.throwNewError());let n=this.getObjectStore(a,t,[t],at);return await this._selectAllExecute(n,e)}_selectAllExecute(t,e,i){return new Promise((a,n)=>{const s=[];let r=void 0===e?t.openCursor():t.openCursor(e);r.onsuccess=(t=>{let e=t.target.result;if(e){if(s.push(e.value),i)return void a(s[0]);e.continue()}else a(s)}),r.onerror=(t=>{n(t)})})}async selectByKey(t){let{tableName:e,key:i}=t;return await this._selectByKey(e,i)}async _selectByKey(t,e){const i=await this.getOpenDB().catch(this.throwNewError());return console.log("_selectByKey tableName:"+t+"/pk:"+e),console.log(e),await this._selectByKeyOnTran(i,t,e).catch(this.throwNewError())}_selectByKeyOnTran(t,e,i,a){return new Promise((a,n)=>{let s=this.getObjectStore(t,e,[e],at).get(i);s.onsuccess=(t=>{a(s.result)}),s.onerror=(t=>{n(t)})})}async selectFirstOne(t){let{tableName:e,range:i,direction:a}=t;return await this._selectFirstOne(e,i,a)}async _selectFirstOne(t,e,i){const a=await this.getOpenDB().catch(this.throwNewError());let n=this.getObjectStore(a,t,[t],at);return await this._selectAllExecute(n,e,!0)}async insertUpdate(t){let{tableName:e,data:i,callback:a}=t;const n=this.getKeyPathByMap();return await this._insertUpdate(e,n,i,a).catch(this.throwNewError())}async _insertUpdate(t,e,i,a){const n=i[e],s=await this.getOpenDB().catch(this.throwNewError()),r=it.currentTables(t),o=await this._selectByKeyOnTran(s,t,n,r).catch(this.throwNewError());return a&&a(o,i),void 0===o?await this._insertExecute(s,t,n,i,r).catch(this.throwNewError()):await this._updateExecute(s,t,n,i,r).catch(this.throwNewError())}_insertExecute(t,e,i,a,n){let s=this.getObjectStore(t,e,n,nt);return new Promise((t,e)=>{let n=s.add(a);n.onsuccess=(e=>{t({data:a,key:i})}),n.onerror=(t=>{e(t)})})}_updateExecute(t,e,i,a,n){return new Promise((s,r)=>{let o=this.getObjectStore(t,e,n,nt).put(a);o.onsuccess=(t=>{s({data:a,key:i})}),o.onerror=(t=>{s(t)})})}async deleteWithRange(t){let{tableName:e,range:i,condetions:a}=t;return await this._deleteWithRange(e,i,a)}async _deleteWithRange(t,e,i){const a=await this.getOpenDB().catch(this.throwNewError()),n=it.currentTables(t);return await this._deleteWithRangeExecute(a,t,e,i,n)}_deleteWithRangeExecute(t,e,i,a,n){return new Promise((s,r)=>{let o=this.getObjectStore(t,e,n,nt),l=o.openCursor(i);l.onsuccess=(t=>{let e=t.target.result,i=[];if(e){let t=e.value;if(it.isMutch(t,a)){let a=o.delete(e.key);a.onsuccess=(e=>{i.push(t)}),a.onerror=(t=>{})}e.continue()}else s(i)}),l.onerror=(t=>{r(t)})})}async delete(t){let{tableName:e,key:i}=t;return await this._delete(e,i)}async _delete(t,e){const i=await this.getOpenDB().catch(this.throwNewError()),a=it.currentTables(t);return await this._deleteOnTran(i,t,e,a)}_deleteOnTran(t,e,i,a){return new Promise((n,s)=>{let r=this.getObjectStore(t,e,a,nt).delete(i+"");r.onsuccess=(t=>{n({tableName:e,key:i})}),r.onerror=(t=>{s(t)})})}async truncate(t){let{tableName:e}=t;return await this._truncate(e)}async _truncate(t){const e=await this.getOpenDB().catch(this.throwNewError()),i=it.currentTables(t);return await this._truncateExecute(e,t,i)}_truncateExecute(t,e,i){return new Promise((a,n)=>{let s=this.getObjectStore(t,e,i,nt).clear();s.onsuccess=(t=>{a()}),s.onerror=(t=>{n(t)})})}async getObjectStoreNames(){const t=await this.getOpenDB().catch(this.throwNewError()),e=t.objectStoreNames;return t.close(),e}async isExistsObjectStore(t){const e=await this.getOpenDB().catch(this.throwNewError());let i=!1;for(let a of e.objectStoreNames)if(a===t){i=!0;break}return e.close(),i}async createStore(t){let{tableName:e,keyPathName:i,isAutoIncrement:a}=t;return await this._createStore(e,i,a)}async _createStore(t,e,i){if(!1===await this.isExistsObjectStore()){const i=await this.getCurrentVersion()+1,a=await this.getOpenDB(i).catch(this.throwNewError());let n=!1;for(let e of a.objectStoreNames)if(e===t){n=!0;break}if(!1===n){a.createObjectStore(t,{keyPath:e})}a.close()}}async dropStore(t){let{tableName:e}=t;return await this._dropStore(e)}async _dropStore(t){const e=await this.getCurrentVersion()+1,i=await this.getOpenDB(e).catch(this.throwNewError());i.deleteObjectStore(t),i.close()}}class rt{constructor(t,e="pk"){void 0===et.idbh&&(et.idbh=new st(et.dbName)),this.idbh=et.idbh,this.keyPathName=e,this.objectStoreName=t}init(){return new Promise((t,e)=>{this.idbh._createStore(this.objectStoreName,this.keyPathName).then(()=>{t(!0)},t=>{throw e(t),t})})}isFished(){return new Promise((t,e)=>{this.firstPromise.then(()=>{t(!0)},t=>{throw t})})}async saveDataDefault(t,e,i){let a={pk:t,data:e};await this.saveData(a,void 0,i)}async saveData(t,e,i){let a=t;void 0===t[this.keyPathName]&&((a={data:t})[this.keyPathName]=e);await this.idbh._insertUpdate(this.objectStoreName,this.keyPathName,a,i)}async loadData(t){if(void 0!==t){return await this.idbh._selectByKey(this.objectStoreName,t)}return null}async loadDataDefault(t){let e=await this.loadData(t);return void 0===e||null===e?null:e.data}async loadAllData(){return await this.idbh._selectAll(this.objectStoreName)}async deleteData(t){return void 0!==t?await this.idbh._delete(this.objectStoreName,t):null}async getOsNames(){return await this.idbh.getObjectStoreNames()}}const ot="default",lt=new Map;class ct{constructor(t){this.entityClass=t,this.targetObj="string"==typeof t?t:new t,this.idbAccessor=null,this.entityName=this.targetObj.getEntityName?this.targetObj.getEntityName():t}getStoreNameKey(t=ot){return t+"_"+this.targetObj.getEntityName()}async createStore(t=ot){const e=this.getStoreNameKey(t);return await this.createStoreByName(e,t)}async createStoreByName(t,e=ot){const i=lt.has(t)?lt.get(t):new rt(t);return await i.init().catch(t=>{console.log(t)}),lt.set(t,i),this.idbAccessor=i,i}async setStore(t=ot){this.idbAccessor=await this.createStore(t)}async save(t,e){let i=e;return e.toObj&&(i=e.toObj()),console.log(i),await this.idbAccessor.saveDataDefault(t,i),e}async loadAll(){const t=await this.idbAccessor.loadAllData(),e=[];for(let i of t){const t=this.getEntity(i);e.push(t)}return e}async get(t){const e=t&&t.pk?t.pk:t,i=await this.idbAccessor.loadData(e);return this.getEntity(i)}getEntity(t){if(!t||!t.data)return t;if(t.data&&!this.targetObj.getEntityName)return t.data;const e=new this.entityClass;return e.load(t.data),e}async delete(t){return await this.idbAccessor.deleteData(t)}}class ht{constructor(t="BaseEntity",e="oid"){this.pk=e,this.entitiyName=t,this.refs=[]}isEntitiy(){return!0}getEntityName(){return this.entitiyName}create(){}update(){}setPk(t){return this[this.pk]=t}getPk(){return this[this.pk]}include(t){console.log("!=======BaseEntity.include====================!!"),console.log(t)}exclude(t){console.log("!=======BaseEntity.exclude====================!!"),console.log(t)}async deepClone(){return await x.deepClone(this)}load(t){for(let e in t)this[e]=t[e]}toObj(){let t=x.singleDeepCloneWithoutFuncs(this);return delete t.pk,delete t.refs,this.exclude(t),t}}class dt extends ht{constructor(t){super("Binary"),this._ab=t,this.createDate=Date.now(),this.updateDate=Date.now()}set ab(t){buffer&&!buffer.byteLength&&alert("not arrayBuffer!"),this._ab=t}get ab(){return this._ab}load(t){super.load(t),this._ab=new Uint8Array(this._ab).buffer}create(){return new dt}}const ut="-";class gt{constructor(t){this.pk=t}static getDelimiter(){return"-"}static assemblePK(t,e){return t.getEntityName()+ut+e}static isPrimaryKey(t){return t&&"string"==typeof t&&2===t.split(ut).length}static getPrimaryKey(t){return t?gt.isPrimaryKey(t)?t:t.getEntityName&&t.getPk?t.getPk():t.pk?t.pk:null:t}static getEntityName(t){return gt.getPrimaryKey(t).split(ut)[0]}}class mt{static binaryString2ArrayBuffer(t){return mt.binaryString2Uint8Array(t).buffer}static arrayBuffer2BinaryString(t){return mt.uint8Array2BinaryString(new Uint8Array(t))}static arrayBuffer2base64(t){return btoa(mt.uint8Array2BinaryString(new Uint8Array(t)))}static arrayBuffer2DataURI(t,e="application/octet-stream"){return"data:"+e+";base64,"+btoa(mt.arrayBuffer2BinaryString(t))}static binaryString2Uint8Array(t){t.split("");const e=t.length,i=new Uint8Array(new ArrayBuffer(e));for(let a=0;a<e;a++)i[a]=t.charCodeAt(a);return i}static uint8Array2BinaryString(t){let e=[];for(let i of t)e.push(String.fromCharCode(i));return e.join("")}static binaryString2DataURI(t,e="application/octet-stream"){return"data:"+e+";base64,"+btoa(t)}static base642DataURI(t,e="application/octet-stream"){return"data:"+e+";base64,"+t}static base642binaryString(t){return atob(t)}static base642ArrayBuffer(t){return mt.binaryString2ArrayBuffer(atob(t))}static dataURI2BinaryString(t){return atob(t.split(",")[1])}static dataURI2ArrayBuffer(t){return mt.binaryString2Uint8Array(atob(t.split(",")[1])).buffer}static uintArray2ArrayBuffer(t){return t.buffer}static arrayBuffer2Uint8Array(t){return new Uint8Array(t)}static arrayBuffer2Uint16Array(t){return new Uint16Array(t)}static arrayBuffer2Uint32Array(t){return new Uint32Array(t)}static ArrayBuffer2Blob(t,e="application/octet-stream"){return new Blob([t],{type:e})}static readBlob(t){const e=new FileReader,i=new Promise((t,i)=>{e.onload=(i=>{t(e.result)}),e.onerror=(t=>{i(e.error)})});return{asArrayBuffer:()=>(e.readAsArrayBuffer(t),i),asBinaryString:()=>(e.readAsBinaryString(t),i),asDataURL:()=>(e.readAsDataURL(t),i),asText:()=>(e.readAsText(t),i)}}}const pt="default",ft="pk_increment",yt="pk_row";class wt{constructor(t){this.ss=new ct(t+"_"+ft)}async acquirePKNo(t=pt,e,i=yt){e.getEntityName();await this.ss.createStoreByName(t+"_"+ft,t);let a=await this.ss.get(i),n=this.countUpUint32(a?a.data:0);a||(a={data:n});let{data:s,keyPath:r}=await this.ss.save(i,a,(t,e)=>{let i=this.countUpUint32(e.data);t.data=i});return mt.arrayBuffer2base64(s)}countUpUint32(t){let e=t;e||(e=new ArrayBuffer(4)),e.data&&(e=e.data);let i=new DataView(e),a=0|i.getUint32(0);return a++,i.setInt32(0,a>>>0),i.buffer}}const vt="default",bt="BINALY_PK_ROW",At=new dt;class Pt{constructor(t,e,i=vt){this.userId=i,this.entityClass=e,this.entity=new e,this.entityName=this.entity.getEntityName(),this.ss=new ct(e),this.pkais=new wt(i),this.em=t}async init(){return await this.ss.setStore(this.userId)}async save(t){return await this.saveExecute(t,!1)}async saveWithBinary(t){return await this.saveExecute(t,!0)}async saveExecute(t,e){if(console.log("EntityManagerImpl save!!A!! data:"+t+"/isWithBinary:"+e),!t||!t.getEntityName||!t.getPk||t.getEntityName()!==this.entityName)return void console.log("EntityManagerImpl save!!Z!! data:"+t.getEntityName()+"/this.entityName:"+this.entityName+"/data.getPk:"+t.getPk);let i=t.getPk();i||(i=gt.assemblePK(this.entity,await this.pkais.acquirePKNo(this.userId,this.entity))),e?(console.log("EntityManagerImpl saveBinary!!A!! data:"+t+"/isWithBinary:"+e),console.log(t),console.log("EntityManagerImpl saveBinary!!B!! data:"+t+"/isWithBinary:"+e)):await this.saveArrayBufferCols(t),t.setPk(i),console.log(t);const a=await this.ss.save(i,t);return console.log("EntityManagerImpl save!!B!! savedData:"+a),a}async saveArrayBufferCols(t){if(At.getEntityName()!==t.getEntityName()){console.log("saveArrayBufferCols save!!A!! data:"+t),console.log(t),console.log("saveArrayBufferCols save!!B!! data:"+t);for(let e in t){const i=t[e];if(i)if(Array.isArray(i))for(let t of i){const e=i[t];if(!e||e.byteLength)continue;const a=await this.saveArrayBufferData(e);i[t]=new gt(a)}else if(i.byteLength){const a=await this.saveArrayBufferData(i);t[e]=new gt(a)}}}}async saveArrayBufferData(t){if(console.log("saveArrayBufferData save!!A!! item:"+t),console.log(t),console.log("saveArrayBufferData save!!B!! item:"+t),!t.getEntityName&&t.byteLength){const e=new dt(t),i=await this.getBinaryPK();return e.setPk(i),console.log("saveArrayBufferData save!!C!! data:"+e),console.log(e),await this.em.Binary.saveWithBinary(e),i}if(t.getEntityName&&"PrimaryKey"===t.getEntityName())return t;if(t.getEntityName&&"Binary"===t.getEntityName()){const e=t.getPk();if(e)return t.setPk(e),console.log("saveArrayBufferData save!!D!! item:"+t),await this.em.Binary.saveWithBinary(t),e;{console.log("saveArrayBufferData save!!E!! item:"+t);const e=await this.getBinaryPK();return t.setPk(e),await this.em.Binary.saveWithBinary(t),e}}}async getBinaryPK(){const t=await this.pkais.acquirePKNo(this.userId,At,bt);return gt.assemblePK(At,t)}async loadAll(){return await this.ss.loadAll(this.entity)}async get(t){return await this.ss.get(t,this.entity)}async delete(t){return await this.ss.delete(t)}}const Dt="default";class xt{constructor(){}async initAsNewUser(t,e=Dt){for(let i of t)await this.initParEntity(i,e);await this.initParEntity(dt,e)}async initParEntity(t,e){x.addBaseCLassese(t);const i=(new t).getEntityName();this[i]=new Pt(this,t,e),await this[i].init()}isPrimaryKey(t){return!(!t||"PrimaryKey"!==t.getEntityName())}async get(t){if(!t)return alert("pk:"+t),null;const e=gt.getPrimaryKey(t);if(!gt.isPrimaryKey(e))return alert(e),null;const i=gt.getEntityName(e);return await this[i].get(e)}async delete(t){if(!t)return alert(t),null;const e=gt.getEntityName(t);return await this[e].delete(t)}}class Bt{constructor(){}getIndigator(t){return!1==!!this.pb&&(this.pb=new ee(t)),this.pb}}class St extends ht{constructor(t,e,i){super("Title"),this.id=t,this.prefix=e,this.name=i,this.target="",this.no="",this.date="",this.pageNo=0,this.setting=null,this.series=null,this.pageNum=-1,this.images=[],this.pages=[],this.outputsPars=[],this.direction="r2l",this.createDate=Date.now(),this.updateDate=Date.now(),this.listing=0}}class kt extends ht{constructor(){super("Images"),this.name=null,this.binary=null,this.type=null,this.thumbnail=null,this.modifyDate=null,this.width=null,this.height=null,this.createDate=Date.now(),this.updateDate=Date.now(),this.listing=0}}class It extends ht{constructor(){super("Thumbnales"),this.name=null,this.binary=null,this.type=null,this.width=null,this.height=null,this.createDate=Date.now(),this.updateDate=Date.now(),this.listing=0}}class Nt extends ht{constructor(t){super("Series"),this.name=t,this.target=null,this.no="",this.date="",this.pageNo=0}}class Et{constructor(){}static asc(t,e){const i=Et.execute([{colName:e,isDESC:!1}]);t.sort(i)}static desc(t,e){const i=Et.execute([{colName:e,isDESC:!0}]);t.sort(i)}static orderBy(t,e){const i=Et.execute(e);t.sort(i)}static execute(t){return(e,i)=>{for(let a of t){const{colName:t,isDESC:n}=a;if(e===i)return 0;if(!e)return n?1:-1;if(!i)return n?-1:1;let s=e[t],r=i[t];if(console.log("a:"+s+"/b:"+r),s<r)return n?1:-1;if(s>r)return n?-1:1}return 0}}static thinningNullData(t){const e=[];for(let i in t){const a=t[i];null!==a&&void 0!==a&&e.push(a)}const i=t.length;for(let e=0;e<i;e++)t.pop();for(let i in e){const a=e[i];t.push(a)}}static typeof(){}}class Vt{constructor(){this.actionDispatcher=R.createStandAlone(),this.name="FileUploader",this.ms=Zt.getInstance()}async readAsArrayBuffer(t){return await this.read(t,"ArrayBuffer")}async readAsBinaryString(t){return await this.read(t,"BinaryString")}async readAsDataURL(t){return await this.read(t,"DataURL")}async readAsText(t){return await this.read(t,"text")}read(t,e="binaryString"){return new Promise((i,a)=>{this.reader=new FileReader,this.reader.onerror=(t=>{a(this.errorHandler(t))}),this.reader.onprogress=(t=>{this.updateProgress(t)}),this.reader.onabort=(t=>{alert("File read cancelled")}),this.reader.onloadstart=(t=>{this.onLoadStart(t)}),this.reader.onload=(t=>{i(this.onload(t))}),"ArrayBuffer"===e?this.reader.readAsArrayBuffer(t):"BinaryString"===e?this.reader.readAsBinaryString(t):"DataURL"===e?this.reader.readAsDataURL(t):this.reader.readAsText(t)})}abortRead(){this.reader&&this.reader.abort(),this.actionDispatcher.dispatch(tt.creatRemoveAction())}errorHandler(t){switch(t.target.error.code){case t.target.error.NOT_FOUND_ERR:alert("File Not Found!");break;case t.target.error.NOT_READABLE_ERR:alert("File is not readable");break;case t.target.error.ABORT_ERR:break;default:alert("An error occurred reading this file.")}}updateProgress(t){const e=Math.round(t.loaded/t.total*100);e<100&&this.actionDispatcher.dispatch(tt.creatUpdateAction(null,{progress:e}))}onload(t){return this.actionDispatcher.dispatch(tt.creatCompleatAction()),this.reader.result}onLoadStart(){this.actionDispatcher.dispatch(tt.creatAddAction())}}const Tt="CopiBon",Ct="DefaultName",Ot="title_";class Lt{constructor(t,e){this.em=t,this.ms=Zt.getInstance(),this.ip=this.ms.ip,this.im=this.ms.im,this.tbm=this.ms.tbm,this.sm=this.ms.sm,console.log("title is new!!"+this.tbm)}async loadCurrent(){return this.currentTitle}async load(t=Tt){if(this.currentTitle&&this.currentTitle.getPk()===t)return this.currentTitle;let e=await this.em.Title.get(t);return e||(e=await this.createTitle(t)),this.currentTitle=e,e}async createTitle(t=Tt,e=Ot,i=Ct){const a=new St(t,e,i);return a.setPk(t),a.setting=t,await this.sm.createDefault(t),await this.em.Title.save(a),a}async changeTitle(t){this.currentTitle=await this.loadTitle(t),this.currentTitle||(this.currentTitle=await this.createTitle(Tt,Ot,Ct))}async loadTitleList(){return await this.em.Title.loadAllData()}async saveTitle(t){if(t){t.updateDate=Date.now();const e=t.images;Et.thinningNullData(e);for(let t in e){const i=e[t];gt.isPrimaryKey(i)||(e[t]=gt.getPrimaryKey(i))}this.currentTitle=await this.em.Title.save(t)}}async deleteTitleCascade(){this.titelId,this.titelPrefix}async addImageFiles(t){const e=await this.loadCurrent(),i=e.images;Et.thinningNullData(i);const a=[];let n=i.length;for(let e of t){let{imagePk:t,imageEntity:s}=await this.im.saveImageFile(e,n);n++,i.push(t),a.push(s)}return console.log(i),await this.saveTitle(e),a}async addImage(t,e){}async removeImage(t){const e=await this.load(),i=e.images;for(let e in i){const a=i[e];gt.getPrimaryKey(a)===t&&(await this.im.remove(t),delete i[e])}console.log(i),await this.saveTitle(e)}async loadThumbnails(){const t=await this.loadCurrent();return await this.im.loadThumbnails(t.images)}async updateImagesListing(t){const e=await this.loadCurrent();return await this.im.updateImagesListing(e.images,t)}async exportPDF(){}async exportZip(){}}class Kt{constructor(t){this.em=t}async load(t){let e=t;return t||(e=gt.getPrimaryKey(t)),await this.em.Binary.get(e)}async remove(t){let e=t;return t||(e=gt.getPrimaryKey(t)),await this.em.Binary.delete(e)}async save(t,e,i){console.log("BinaryManager save!!A!! pk:"+t),console.log(i),console.log("BinaryManager save!!B!! name:"+e);let a=null;t&&(a=await this.em.Binary.get(t)),console.log(i),alert(i);let n=gt.getPrimaryKey(i);return a?a.updateDate=Date.now():a=new dt,a.binary=n||i,await this.em.Binary.save(a)}}class Rt extends ht{constructor(){super("Pages"),this.previewThumbnail=null,this.outputImage=null,this.createDate=Date.now(),this.updateDate=Date.now(),this.listing=0}}class _t{constructor(t){this.em=t}async loadFromImagePk(t){const e=gt.getPrimaryKey(t),i=await this.em.get(e);if(!i||!i.thumbnail)return null;const a=gt.getPrimaryKey(i.thumbnail),n=await this.em.get(a);return n.parentPk=e,n}async remove(t){const e=await this.em.Pages.get(t);e&&(e.previewThumbnail&&await this.em.Binary.delete(e.previewThumbnail),e.outputImage&&await this.em.Binary.delete(e.outputImage),await this.em.Pages.delete(t))}async move(t,e){const i=await this.em.Pages.get(t),a=await this.em.Pages.get(e),n=i.previewThumbnail,s=a.previewThumbnail,r=i.outputImage,o=a.outputImage;i.previewThumbnail=s,a.previewThumbnail=n,i.outputImage=o,a.outputImage=r,await this.em.Pages.save(i),await this.em.Pages.save(a)}async loadAll(){const t=[],e=this.em.Pages.loadAll();for(let i of e)t.push(i);return t}async load(t){return await this.em.Pages.get(t)}async save(t,e,i,a=0){let n=null;return t&&(n=await this.em.Pages.get(t)),n?n.updateDate=Date.now():n=new Rt,n.previewThumbnail=e||null===e?e:n.previewThumbnail,n.outputImage=binaryPk||binary,n.outputImage=i||null===i?i:n.outputImage,n.listing=a||null===a?a:n.listing,await this.em.Pages.save(n)}}class Mt extends ht{constructor(){super("Settings"),this.name="",this.pageNum=0,this.startPage="l",this.pageDelection=0,this.outputProfile=null,this.createDate=Date.now(),this.updateDate=Date.now(),this.listing=0}}class Ut{constructor(t,e){this.em=t,this.opm=e}async loadByPk(t){return await this.em.Settings.get(t)}async loadAll(){const t=[],e=this.em.Pages.loadAll();for(let i of e)t.push(i);return t}async createDefault(t){const e=new Mt;return e.setPk(t),e.pageNum=8,e.startPage="l",e.pageDelection="r2l",e.outputProfile=this.opm.getDefaultPk(),e.listing=0,await this.em.Settings.save(e)}async save(t,e,i,a,n,s,r=0){let o=null;return t&&(o=await this.em.Settings.get(t)),o?o.updateDate=Date.now():o=new Mt,o.name=e||null===e?e:o.name,o.pageNum=i||8,o.startPage=a||null===a?a:o.startPage,o.pageDirection=n||null===n?n:o.pageDirection,o.outputProfile=s||null===s?s:o.outputProfile,o.listing=r||null===r?r:o.listing,await this.em.Settings.save(o)}}class jt extends ht{constructor(t,e,i){super("OutputProfiles"),this.id=t,this.prefix=e,this.pageSize="A5",this.direction="r2l",this.createDate=Date.now(),this.updateDate=Date.now(),this.listing=0}}const Ft="copibondefa";class Wt{constructor(t){this.em=t,this.createDefault()}getDefaultPk(){return Ft}async loadAll(){const t=[],e=await this.em.OutputProfiles.loadAll();for(let i of e)t.push(i);return t.length<1&&t.push(await this.createDefault()),t}async loadByPk(t){const e=gt.getPrimaryKey(t);if(e){return await this.em.OutputProfiles.get(e)}return await this.em.OutputProfiles.get(t)}async createDefault(){const t=await this.loadByPk(Ft);if(t)return t;const e=new jt;return e.setPk(Ft),await this.em.OutputProfiles.save(e)}async save(t,e,i,a,n,s,r=0){let o=null;t&&(o=await this.em.OutputProfiles.get(t));let l=gt.getPrimaryKey(i);return o?o.updateDate=Date.now():o=new Setting,o.name=e||null===e?e:o.name,o.binary=l||i,o.type=a||null===a?a:o.type,o.width=n||null===n?n:o.width,o.height=s||null===s?s:o.height,o.listing=r||null===r?r:o.listing,await this.em.Thumbnales.save(o)}}class zt{constructor(t){this.ms=Zt.getInstance(),this.em=t,this.ip=this.ms.ip,this.tbm=this.ms.tbm}async load(t){let e=t;return t||(e=gt.getPrimaryKey(t)),await this.em.Images.get(e)}async remove(t){const e=await this.em.get(t);console.log("removeImage imageEntity.thumbnail:"+e.thumbnail);const i=gt.getPrimaryKey(e.binary);console.log("removeImage binaryPk:"+i);const a=gt.getPrimaryKey(e.thumbnail);if(console.log("removeImage thumbnailPk:"+a),a){const t=await this.em.get(a);console.log("removeImage thumbnailEntity:"+t);const e=gt.getPrimaryKey(t.binary);console.log("removeImage thumbnailBinaryPk:"+e),await this.em.delete(e),await this.em.delete(a)}await this.em.delete(i),await this.em.delete(t)}async saveImageFile(t,e=0){const i=new Vt,a=await i.readAsArrayBuffer(t),n={name:t.name,ab:a,type:t.type},s=await this.ip.createImageNodeByData(n),r=await this.ip.createThumbnail(a,100,100,t.type),o=mt.dataURI2ArrayBuffer(r),l=await this.ip.createImageNodeByData({name:t.name,ab:o,type:t.type}),c=await this.tbm.save(null,t.name,o,t.type,l.width,l.height,0);console.log("addImageFiles thumbnailEntity:"+c);const h=gt.getPrimaryKey(c);console.log("addImageFiles thumbnailPk:"+h);const d=await this.save(null,t.name,a,t.type,s.width,s.height,h,e);return console.log("addImageFiles imageEntity:"+d),{imagePk:d.getPk(),imageEntity:d}}async save(t,e,i,a,n,s,r,o=0){let l=null;t&&(l=await this.em.Images.get(t)),console.log("ImageManager save!!9!! binary:"+i);let c=gt.getPrimaryKey(i);l?l.updateDate=Date.now():l=new kt,console.log("ImageManager save!!A!! image:"+l),l.name=e||null===e?e:l.name,l.binary=c||i,l.type=a||null===a?a:l.type,l.width=n||null===n?n:l.width,l.height=s||null===s?s:l.height,l.thumbnail=r||null===r?r:gt.getPrimaryKey(l.thumbnail),l.listing=o||null===o?o:l.listing;const h=await this.em.Images.save(l);return console.log("ImageManager save!!B!! image:"+h),h}async loadThumbnails(t){const e=[],i=[];for(let e of t){const t=gt.getPrimaryKey(e),a=await this.load(t);i.push(a)}Et.orderBy(i,[{colName:"listing",isDESC:!1}]);for(let t of i){const i=gt.getPrimaryKey(t),a=await this.tbm.loadFromImagePk(i);e.push(a)}return e}}class Ht{constructor(t){this.em=t}async loadFromImagePk(t){const e=gt.getPrimaryKey(t),i=await this.em.get(e);if(!i||!i.thumbnail)return null;const a=gt.getPrimaryKey(i.thumbnail),n=await this.em.get(a);return n.parentPk=e,n}async load(t){let e=t;return t||(e=gt.getPrimaryKey(t)),await this.em.Thumbnales.get(e)}async save(t,e,i,a,n,s,r=0){let o=null;t&&(o=await this.em.Thumbnales.get(t));let l=gt.getPrimaryKey(i);return o?o.updateDate=Date.now():o=new It,o.name=e||null===e?e:o.name,o.binary=l||i,o.type=a||null===a?a:o.type,o.width=n||null===n?n:o.width,o.height=s||null===s?s:o.height,o.listing=r||null===r?r:o.listing,await this.em.Thumbnales.save(o)}}class Yt extends ht{constructor(){super("Pdfs"),this.name=null,this.binary=null,this.type=null,this.modifyDate=null,this.width=null,this.height=null,this.createDate=Date.now(),this.updateDate=Date.now(),this.listing=0}}const Xt=/^image\/.+/;class qt{constructor(){this.canvas=a.createCanvas(null,"hidden"),this.ctx=this.canvas.getContext("2d");window.onload=(()=>{document.body.appendChild(this.canvas)})}setDataURI(t){this.dataURI=t}create(t,e,i,a){return new Promise((n,s)=>{const r=new Image;r.src=mt.arrayBuffer2DataURI(t,a),r.onload=(()=>{const t=e/r.width,a=i/r.height,s=t<=a?t:a;this.canvas.height=r.height*s,this.canvas.width=r.width*s,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.scale(s,s),this.ctx.drawImage(r,0,0),n(this.exportPng())}),r.onerror=(t=>{console.log("失敗"),console.log(t),s(null)})})}exportPng(){return this.canvas.toDataURL()}exportJpeg(t=1){return this.canvas.toDataURL("image/jpeg",t)}createImageNodeByData(t){return new Promise((e,i)=>{let{name:n,ab:s,type:r}=t,o=a.createImage();if(o.alt=escape(n),r&&r.match(Xt))return o.src=mt.arrayBuffer2DataURI(s,r),o.onload=(()=>{t.height=o.height,t.width=o.width,e(o)}),void(o.onerror=(t=>{console.log("失敗"),console.log(t),i(t)}));e(o)})}}class Gt{constructor(){this.ip=new qt}async createThumbnail(t,e){const i=await this.ip.create(t,100,100,e);return console.log(i),i}async createImageNodeByData(t){return await this.ip.createImageNodeByData(t)}}var Jt=i(0);const $t=new class{constructor(){this.vpl=new Bt,this.em=new xt,this.ip=new Gt}async init(){await this.em.initAsNewUser([kt,Yt,Nt,It,St,Rt,Mt,jt]),this.ip=new Gt,this.bm=new Kt(this.em),this.tbm=new Ht(this.em),this.pb=new Ht(this.em),this.tbm=new Ht(this.em),this.im=new zt(this.em),this.pm=new _t(this.em),this.opm=new Wt(this.em),this.sm=new Ut(this.em,this.opm),this.tm=new Lt(this.em),await this.tm.load()}getViewPartsLoader(){return this.vpl}};class Zt{static getInstance(){return(new Jt.a).postMessage("WASMcaller",""),$t}async init(){await $t.init()}}let Qt=null;class te extends q{constructor(){super(),this.ms=Zt.getInstance(),this.vpl=this.ms.getViewPartsLoader(),this.em=this.ms.em,this.tm=this.ms.tm,this.progressBarAddAction=tt.creatAddAction(),this.progressBarRemoveAction=tt.creatRemoveAction(),this.progressBarUpdateAction=tt.creatUpdateAction(),this.progressBarCompleatSortAction=tt.creatCompleatAction(),this.atatch(this.progressBarAddAction),this.atatch(this.progressBarRemoveAction),this.atatch(this.progressBarUpdateAction),this.atatch(this.progressBarCompleatSortAction),this.storeKey="progress"}static register(){Qt||(Qt=new te)}async reduce(t,e){return this.progressBarAddAction.type===e.type?t[this.storeKey]=this.createProgress(!0,0,!1):this.progressBarRemoveAction.type===e.type?t[this.storeKey]=this.createProgress(!1,0,!1):this.progressBarUpdateAction.type===e.type?t[this.storeKey]=this.createProgress(!0,e.data.progress,!1):this.progressBarCompleatSortAction.type===e.type&&(t[this.storeKey]=this.createProgress(!0,100,!0)),t}createProgress(t,e,i){return{isVisible:t,progress:e,isComple:i}}}class ee extends ${constructor(){super("ProgressBar","ProgressBar"),this.storeKey="progress",this.initPoint="0%"}onAfterAttach(t,e){te.register()}render(){return U("".ProgressBarView,{style:{display:"none"}},[U("",["progeressFrame"],[U("",["progeress"],{style:{width:this.initPoint}})]),U("",["progeressPoints"],this.initPoint)])}async onViewShow(t,e){t.progress&&await this.showProgress(t.progress)}showProgress(t){const{isVisible:e,progress:i,isComple:a}=t;e?(this.currentVnode.elm.style.display="block",this.prePatch(".progeress",U("",["progeress"],{style:{width:i+"%"}})),this.prePatch(".progeressPoints",U("",["progeressPoints"],{},i+"%")),a&&setTimeout(()=>{this.currentVnode.elm.style.display="none"},1e3)):(this.currentVnode.elm.style.display="none",this.prePatch(".progeress",U("",["progeress"],{style:{width:"0%"}})),this.prePatch(".progeressPoints",U("",["progeressPoints"],{},this.initPoint)))}}class ie{constructor(){}}class ae{constructor(){}static creatAddAction(t,e,i=null){return k.createBaseAction("addImage",t,e,i)}static creatRemoveAction(t,e,i=null){return k.createBaseAction("removeImage",t,e,i)}static creatLoadImagesAction(t,e,i=null){return k.createBaseAction("loadImages",t,e,i)}static creatSortImagesAction(t,e,i=null){return k.createBaseAction("sortImages",t,e,i)}static creatAddPageAction(t,e,i=null){return k.createBaseAction("addPage",t,e,i)}static creatRemovePageAction(t,e,i=null){return k.createBaseAction("removePage",t,e,i)}static creatResetPagesAction(t,e,i=null){return k.createBaseAction("resetPages",t,e,i)}static creatSortPagesAction(t,e,i=null){return k.createBaseAction("sortPages",t,e,i)}static creatChangeTitleImagesAction(t,e,i=null){return k.createBaseAction("changeTitle",t,e,i)}static creatDetailAction(t,e,i=null){return k.createBaseAction("detail",t,e,i)}static getStoreImagesKey(){return"imagesData"}static getStorePagesKey(){return"pagesData"}}class ne{constructor(){this.ms=Zt.getInstance(),this.em=this.ms.em,this.pm=this.ms.pm,this.tm=this.ms.tm}async resetPages(t){const e=await this.tm.load(),i=e.pages,a=[],n=[];let s=0;if(i.length>t){for(let e in i){const r=i[e];if(!r)continue;const o=await this.em.get(r);a.push(o),++s>t&&n.push(r)}for(let t in n){const e=n[t];for(let t in i){if(e===i[t]){delete i[t],this.pm.remove(e);break}}}}else{i.length;for(let e=i.length;e<t;e++){const t=await this.pm.save(null,null,null,e);i.push(t)}}await this.tm.saveTitle(e)}async loadPages(){const t=(await this.tm.load()).pages,e=[];for(let i in t){const a=t[i];if(!a)continue;const n=await this.em.get(a);e.push(n)}}async move(t,e){await this.pm.move(t,e)}async remove(t){return await this.tm.removeImage(t),loadedImageMap.delete(t),this.getRetObjsAsList()}}class se{constructor(){}static creatAction(t,e,i=null){return k.createBaseAction("creatSetting",t,e,i)}static creatRemoveAction(t,e,i=null){return k.createBaseAction("removeSetting",t,e,i)}static creatLoadAction(t,e,i=null){return k.createBaseAction("loadSetting",t,e,i)}static creatUpdateAction(t,e,i=null){return k.createBaseAction("updateSetting",t,e,i)}static getStoreKey(){return"settings"}static getStoreKeyOpm(){return"settingsOpm"}}let re=null;const oe=new Map;class le extends q{constructor(){super(),this.ms=Zt.getInstance(),this.vpl=this.ms.getViewPartsLoader(),this.ip=this.ms.ip,this.em=this.ms.em,this.pm=this.ms.pm,this.tm=this.ms.tm,this.imagAddAction=ae.creatAddAction(),this.imageRemoveAction=ae.creatRemoveAction(),this.imagesLoadAction=ae.creatLoadImagesAction(),this.imagesSortAction=ae.creatSortImagesAction(),this.imagesChangeTitleAction=ae.creatChangeTitleImagesAction(),this.imagesDetailAction=ae.creatDetailAction(),this.pageAddAction=ae.creatAddPageAction(),this.pageRemoveAction=ae.creatRemovePageAction(),this.pagesResetAction=ae.creatResetPagesAction(),this.pagesSortAction=ae.creatSortPagesAction(),this.atatch(this.imagAddAction),this.atatch(this.imageRemoveAction),this.atatch(this.imagesLoadAction),this.atatch(this.imagesSortAction),this.atatch(this.imagesChangeTitleAction),this.atatch(this.imagesDetailAction),this.atatch(this.pageAddAction),this.atatch(this.pageRemoveAction),this.atatch(this.pagesResetAction),this.atatch(this.pagesSortAction),this.pp=new ne,this.storeImagesKey=ae.getStoreImagesKey(),this.storePagesKey=ae.getStoreImagesKey(),this.storeSettingKey=se.getStoreKey()}static register(){re||(re=new le)}async reduce(t,e){if(this.imagAddAction.type===e.type)t[this.storeImagesKey]=await this.saveFiles(e.data.files);else if(this.imageRemoveAction.type===e.type)t[this.storeImagesKey]=await this.remove(e.data.imagePKforDelete);else if(this.imagesLoadAction.type===e.type){t[this.storeImagesKey]=await this.loadImages();t[this.storeSettingKey]}else if(this.imagesSortAction.type===e.type)t[this.storeImagesKey]=await this.sort(e.data.imagePKmove,e.data.imagePKdrop);else if(this.imagesChangeTitleAction.type===e.type);else if(this.pageAddAction.type===e.type)t[this.storePagesKey]=await this.pp(e.data.files);else if(this.pageRemoveAction.type===e.type)t[this.storeImagesKey]=await this.loadImages();else if(this.pagesResetAction.type===e.type){await this.loadImages();t[this.storeImagesKey]=await this.loadImages()}else this.pagesSortAction.type===e.type?t[this.storeImagesKey]=await this.loadImages():this.imagesDetailAction.type===e.type&&(t.imagesDetailData=await this.loadAImage(e.data.imagePK));return t}async saveFiles(t){const e=await this.tm.addImageFiles(t),i=this.getEntitisAsList();for(let t of e)i.unshift(t);return await this.createRetList(i)}async sort(t,e){console.log("sort movePk:"+t+"/dropPk:"+e+"/this.em.save:"+this.em),console.log(this.em);const i=this.getEntitisAsList();for(let t in i){const e=i[t],a=e.getPk();e.listing=t,console.log("sort pk:"+a+"/index:"+t+"/imageEntity.listing:"+e.listing)}Et.orderBy(i,[{colName:"listing",isDESC:!1},{colName:"updateDate",isDESC:!0}]);const a={};a[t]=e,a[e]=t;for(let t in i){const e=i[t],n=e.getPk();console.log("sort pk:"+n+"/index:"+t+"/imageEntity.listing:"+e.listing);const s=a[n]?a[n]:n;if(s!==n){const e=oe.get(s).imageEntity;e.listing=t,e.updateDate=Date.now(),await this.em.Images.save(e)}else e.listing=t}return await this.createRetList(i)}async loadAImage(t){if(!t)return;const e=await this.em.get(t),i=await this.em.get(e.binary),a=i._ab.byteLength;return{imageEntity:e,binaryEntity:i,imageText:escape(e.name)+" ("+(e.type||"n/a")+") - "+a+"bytes, last modified: "+e.modifyDate+" size:"+e.width+"x"+e.height}}async loadImages(){const t=(await this.tm.load()).images,e=[];for(let i in t){const a=t[i];if(!a)continue;const n=await this.em.get(a);e.push(n)}return await this.createRetList(e)}async createRetList(t){Et.orderBy(t,[{colName:"listing",isDESC:!1},{colName:"updateDate",isDESC:!0}]);const e=[];for(let i of t){const t=i.getPk();if(oe.has(t)){const i=oe.get(t);e.push(i)}else{const a=await this.processParImage(i);oe.set(t,a),e.push(a)}}return e}async processParImage(t){t.getPk();const e=await this.em.get(t.thumbnail),i=await this.em.get(e.binary),a=(await this.ip.createImageNodeByData({name:t.name,ab:i.ab,type:t.type}),i.ab?new Uint8Array(i.ab).length:0);return{imageEntity:t,binaryEntity:i,size:a,imageText:escape(t.name)+" ("+(t.type||"n/a")+") - "+a+"bytes, last modified: "+t.modifyDate+" size:"+t.width+"x"+t.height,isOnPage:!1}}async remove(t){return await this.tm.removeImage(t),oe.delete(t),this.getRetObjsAsList()}getRetObjsAsList(){const t=[];for(let[e,i]of oe.entries())t.push(i);return t}getEntitisAsList(){const t=[];for(let[e,i]of oe.entries())t.push(i.imageEntity);return t}}class ce extends ie{constructor(t){super(),this.name="FileUploader",le.register()}handleFileSelect(t){return e=>{e.stopPropagation(),e.preventDefault();const i=e.target.files;this.handleFiles(t,i)}}handleDrop(t){return e=>{e.stopPropagation(),e.preventDefault();const i=e.dataTransfer.files;this.handleFiles(t,i)}}handleFiles(t,e){const i=ae.creatAddAction(t,{files:e});t.dispatch(i)}async areadParFile(t){return await areadParFile(t)}}const he="ここにファイルをアップロードしてください。";class de extends ${constructor(){super("fuaPArent","FileUploadArea",!0),this.fu=new ce}render(){return this.FileUploadFile=W("FileUploadFile",["FileUploadFile"],{on:{change:this.fu.handleFileSelect(this)}}),this.fileUploadArea=U("FileUploadArea",["FileUploadAreaA"],he),U(this.id,["FileUploadArea"],{on:{dragover:this.fu.handleDrop(this),drop:this.fu.handleDrop(this),click:t=>{this.getElementById("FileUploadFile").elm.click()}}},[this.fileUploadArea,this.FileUploadFile])}onAfterAttach(t,e){}}const ue=/yyyy/,ge=/MM/,me=/dd/,pe=/hh/,fe=/mm/,ye=/ss/,we=(t,e="yyyy-MM-dd hh:mm:ss")=>{const i=new Date(t),a=i.getFullYear(),n=i.getMonth()+1,s=i.getDate(),r=("0"+i.getHours()).slice(-2),o=("0"+i.getMinutes()).slice(-2),l=("0"+i.getSeconds()).slice(-2);return e.replace(ue,a).replace(ge,n).replace(me,s).replace(pe,r).replace(fe,o).replace(ye,l)};let ve=null;class be extends q{constructor(){super(),this.ms=Zt.getInstance(),this.vpl=this.ms.getViewPartsLoader(),this.em=this.ms.em,this.tm=this.ms.tm,this.sm=this.ms.sm,this.opm=this.ms.opm,this.creatAction=se.creatAction(),this.creatRemoveAction=se.creatRemoveAction(),this.creatLoadAction=se.creatLoadAction(),this.creatUpdateAction=se.creatUpdateAction(),this.atatch(this.creatAction),this.atatch(this.creatRemoveAction),this.atatch(this.creatLoadAction),this.atatch(this.creatUpdateAction),this.storeKey=se.getStoreKey(),this.storeKeyOpm=se.getStoreKeyOpm()}static register(){ve||(ve=new be)}async reduce(t,e){this.creatAction.type===e.type?(t[this.storeKey]=await this.load().catch(t=>{console.log(t)}),t[this.storeKeyOpm]=await this.opm.loadAll()):this.creatRemoveAction.type===e.type?(t[this.storeKey]=await this.reset(e.data).catch(t=>{console.log(t)}),t[this.storeKeyOpm]=await this.opm.loadAll()):this.creatLoadAction.type===e.type?(t[this.storeKey]=await this.load().catch(t=>{console.log(t)}),t[this.storeKeyOpm]=await this.opm.loadAll()):this.creatUpdateAction.type===e.type&&(t[this.storeKey]=await this.update(e.data).catch(t=>{console.log(t)}),t[this.storeKeyOpm]=await this.opm.loadAll())}async update(t){const e=(await this.tm.load()).getPk();this.sm.save(e,t.name,t.pageNum,t.startPage,t.pageDirection,t.outputProfile,t.listing);const i=await this.sm.loadByPk(e);if(!i){return await this.sm.createDefault(e)}return i}async reset(){const t=(await this.tm.load()).getPk();return await this.sm.createDefault(t)}async load(){const t=(await this.tm.load()).getPk(),e=await this.sm.loadByPk(t);if(!e){return await this.sm.createDefault(t)}return e}}navigator.userAgent.replace(/[\.0-9]+/g,"x"),window.location;const Ae={pageStart:{l:"fromLeft",r:"fromRight"},pageDirection:{l2r:"LeftToRight",r2l:"RightToLeft"},pageNums:[1,2,4,6,8,10,12,16]};class Pe extends ${constructor(){super("TitleSettings","TitleSettings"),this.text="TitleSettingsAAA",this.bodyId=this.id+"Child",this.storeKey=se.getStoreKey(),this.getStoreKeyOpm=se.getStoreKeyOpm()}render(){return U(this.bodyId,["TitleSettings"],this.text)}onAfterAttach(t,e){be.register();const i=se.creatLoadAction(this,{});this.dispatch(i)}async onViewShow(t,e){console.log("TitleSettings onViewShow 01 this.storeKey:"+this.storeKey+"/"+t[this.storeKey]),t[this.storeKey]&&await this.showSettings(t[this.storeKey],t[this.getStoreKeyOpm])}update(){return t=>{const e=document.getElementById(this.id+"NameInput").value,i=document.getElementById(this.id+"PageNumInput").value,a=document.getElementById(this.id+"StartPageInput").value,n=document.getElementById(this.id+"PageDirectionInput").value,s=document.getElementById(this.id+"OutputProfileInput").value,r=se.creatUpdateAction(this,{name:e,pageNum:i,startPage:a,pageDirection:n,outputProfile:s,listing:0});this.dispatch(r)}}async showSettings(t,e){console.log(t),console.log(e);const i=this.id+"Label",a=this.id+"Input",n=U("",[this.id+"Title"],"Setting for Output"),s=j("",[i],"name:"),r=z(this.id+"NameInput",[this.id+"NameInput"],{props:{name:this.id+"NameInput"}},"text",t.name),o=U("",[this.id+"Row"],[s,r]),l=j("",[i],"pageNum:"),c=this.id+"PageNumInput",h=Y(c,[a,c],c,Ae.pageNums,t.pageNum),d=U("",[this.id+"Row"],[l,h]),u=j("",[i],"startPage:"),g=this.id+"StartPageInput",m=Y(g,[a,g],g,Ae.pageStart,t.startPage),p=U("",[this.id+"Row"],[u,m]),f=j("",[i],"pageDirection:"),y=this.id+"PageDirectionInput",w=Y(y,[a,y],y,Ae.pageDirection,t.pageDirection),v=U("",[this.id+"Row"],[f,w]),b=j("",[i],"outputProfile:"),A=this.id+"OutputProfileInput",P=z(A,[a,A],{props:{name:A}},"text",t.outputProfile),D=U("",[this.id+"Row"],[b,P]),x=U("",[this.id+"FrameL"],[o,d]),B=U("",[this.id+"FrameR"],[p,v,D]),S=[n,U("",[this.id+"Frame"],[x,B]),U("",[this.id+"Update"],{on:{click:this.update()}},"Save! LastUpdae:"+we(t.updateDate))];this.prePatch("#"+this.bodyId,U(this.bodyId,["TitleSettings"],S))}}class De extends ${constructor(){super("ExportButton","ExportButton"),this.text="ExportButton"}render(){return U(this.id,"ExportButton",this.text)}}class xe extends ${constructor(){super("ImageDetail","ImageDetail"),this.imageAreaID=this.id+"child",this.isOnScroll=!1,this.startX=0,this.startY=0}render(t,e){return U("",[""],[U("",["ImageDetailTitle"],"ImageDetailTitle"),U(this.imageAreaID,["ImageDetailA"],this.id+"aaaaa")])}async onViewShow(t,e){t.imagesDetailData&&(await this.showImage(t.imagesDetailData),this.startX=0,this.startY=0,this.offsetX=0,this.offsetY=0)}async showImage(t){const{imageEntity:e,binaryEntity:i,imageText:a}=t,n=e.getPk(),s=mt.arrayBuffer2DataURI(i._ab),r=F(n+"_image",e.name,e.name,s,{}),o=j(n+"_text",["thumbnail_text"],t.imageText),l=[U("",[""],[r]),U("",[o])];this.prePatch("#"+this.imageAreaID,U(this.imageAreaID,["image_detail_block"],{on:{mousedown:this.onMouseOn(),mousemove:this.onMouseMove()}},l))}click(){return t=>{alert("click")}}onMouseOn(){return t=>{this.startX=this.offsetX?t.clientX+0*this.offsetX-this.offsetX１:t.clientX,this.startY=this.offsetY?t.clientY+0*this.offsetY-this.offsetY１:t.clientY;t.target;this.isOnScroll=!this.isOnScroll}}onMouseOff(){return t=>{t.target;this.isOnScroll=!1}}onMouseMove(){return t=>{const e=t.target;if(this.isOnScroll){const i=t.clientX,a=t.clientY,n=i-this.startX,s=a-this.startY,r=e.parentNode.parentNode;r.style.top=s+"px",r.style.left=n+"px",this.offsetX=this.startX,this.offsetY=this.startY,this.offsetX１=n,this.offsetY１=s}}}}class Be extends ${constructor(t){super("PageImage"+t,"PageImage")}render(){return this.button=U(this.id+"child","PageImageA",this.id),U([this.button])}setImageData(t){this.imageData=t}renderA(t,e){return U("","")}remove(t){return e=>{if(window.confirm("delete ok?")){const e=ImageActionCreator.creatRemoveAction(this,{imagePKforDelete:t});this.dispatch(e)}}}handleDragStart(t){return e=>{const i=e.target;if(!i.classList||!i.classList.contains(this.thumbnail_block))return;i.style.opacity="0.4",this.dragElm=i,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",i.innerHTML);let a=document.createElement("img");a.src=t,a.width=100,e.dataTransfer.setDragImage(a,-10,-10)}}handleDragOver(){return t=>{const e=t.target;if(e.classList&&e.classList.contains(this.thumbnail_block))return t.preventDefault(),t.dataTransfer.dropEffect="move",!1}}handleDragEnter(){return t=>{const e=t.target;e.classList&&e.classList.contains(this.thumbnail_block)&&e.classList.add("over")}}handleDragLeave(){return t=>{const e=t.target;e.classList&&e.classList.contains(this.thumbnail_block)&&e.classList.remove("over")}}handleDrop(t){return t=>{t.stopPropagation(),t.preventDefault();const e=t.target;if(e.classList&&e.classList.contains(this.thumbnail_block)){if(this.dragElm!==e){console.log("sort handleDrop imagePKmove:"+this.dragElm.dataset.pk+"/elm.dataset.pk:"+e.dataset.pk);const t=ImageActionCreator.creatSortImagesAction(this,{imagePKmove:this.dragElm.dataset.pk,imagePKdrop:e.dataset.pk});this.dispatch(t)}return!1}}}handleDragEnd(t){return t=>{const e=t.target;if(!e.classList||!e.classList.contains(this.thumbnail_block))return;e.style.opacity="1";const i=e.parentNode.childNodes;for(let t=0;t<i.length;t++){i[t].classList.remove("over")}}}selectImage(t){return t=>{t.stopPropagation(),t.preventDefault();const e=t.target;console.log("sort selecImage imagePKmove:/elm.dataset.pk:"+e.dataset.pk);const i=ImageActionCreator.creatDetailAction(this,{imagePK:e.dataset.pk});return this.dispatch(i),!1}}async crateDataLine(t){const e=t.imageEntity,i=t.binaryEntity;console.log(i);const a={name:e.name,ab:i._ab,type:e.type},n=await this.ip.createImageNodeByData(a).catch(t=>{throw console.log(t),t}),s=e.getPk(),r=F(s+"_image",e.name,e.name,n.src,{}),o=j(s+"_text",["thumbnail_text"],t.imageText),l=j(s+"_delButton",["delButton"],{on:{click:this.remove(s)}},"x");return U("",[this.thumbnail_block],{on:{dragstart:this.handleDragStart(n.src),dragover:this.handleDragOver(),dragenter:this.handleDragEnter(),dragleave:this.handleDragLeave(),drop:this.handleDrop(),dragend:this.handleDragEnd(),click:this.selectImage()},dataset:{pk:s},props:{draggable:"true","data-pk":s}},[l,U("",["image_block"],[r]),o])}}class Se extends ${constructor(){super("PageImages","PageImages"),this.storeKey=se.getStoreKey(),this.childId=this.id+"child",this.thumbnails={},this.dummyClass="Dummy",this.pages=[];for(let t=0;t<32;t++)this.pages.push(new Be(t))}render(){return this.setting=U(this.id+"child",["PageImagesA"],this.id),U(this.id,"PageImages",[this.setting])}async onViewShow(t,e){let i=[];t[this.storeKey]&&(i=this.buildPageFrames(t[this.storeKey]),t.imagesData&&console.log("Thumnails onViewShow"),this.prePatch("#"+this.childId,U(this.childId,i)))}async showImages(t){const e=[];for(let i of t){if(!i||!i.isOnPage)continue;const t=i.imageEntity.getPk();let a=this.thumbnails[t];a||(a=await this.thumbnail.crateDataLine(i).catch(t=>{console.log(t)}),this.thumbnails[t]=a),e.push(a)}this.prePatch("#"+this.imageAreaID,U(this.imageAreaID,e))}creatPageFrame(t,e,i){const a=[];if(e===this.dummyClass)return a;const n="pageFrameHeader"+(i?"Right":"Left");return a.push(U("",["pageFrameHeader",n],t+"")),a.push(this.pages[t].render()),a}showPreviewSingle(){return t=>{alert("showPreviewSingle")}}showPreviewDual(){return t=>{alert("showPreviewDual")}}buildPreviewButtons(){const t=U("",["previewCallButton"],{on:{click:this.showPreviewSingle()}},"Preview Single"),e=U("",["previewCallButton"],{on:{click:this.showPreviewDual()}},"Preview Dual");return U("",["previewFrame"],[t,e])}buildPageFrames(t){const e=[];e.push(this.buildPreviewButtons());const i=t.startPage,a=1*t.pageNum,n=t.pageDirection,s="r2l"===n,r="r"===i,o=Math.ceil(a/2),l=a%2==1,c=0===n.indexOf(i),h=1*o+1*(l?1:c?0:1),d=this.dummyClass,u=s&&r||!s&&!r,g=!r||u?"":d,m=r||u?"":d,p=l&&(!u||u&&!s)||!l&&(!s||u)?"":d,f=l&&(!u||u&&s)||!l&&(s||u)?"":d,y=h-1;let w=0,v=0;for(let t=0;t<h;t++){const i=(s?1:0)+v+w,a=(s?0:1)+v+w,n=[];if(0===t){const t=s&&u?2:s?1:u?1:0,e=s&&u?1:s?0:u?2:1;n.push(U("",["Page",g],this.creatPageFrame(t,g,!1),h+"L"+t+" "+c)),n.push(U("",["Page",m],this.creatPageFrame(e,m,!0),o+"R"+e+" "+l)),v=1,w+=u?2:1}else t===y?(n.push(U("",["Page",p],this.creatPageFrame(i,p,!1),"L"+i)),n.push(U("",["Page",f],this.creatPageFrame(a,f,!0),"R"+a))):(n.push(U("",["Page"],this.creatPageFrame(i,"",!1),"L"+i)),n.push(U("",["Page"],this.creatPageFrame(a,"",!0),"R"+a)),w+=2);e.push(U("",["PageFrame"],n,"pageFrame index:"+t))}return e}}class ke extends ${constructor(t){super("Thumnail"+t.id,"Thumnail"),this.parent=t,this.ip=this.ms.ip,this.dragElm=null,this.thumbnail_block="thumbnail_block"}setImageData(t){this.imageData=t}render(t,e){return U("","")}remove(t){return e=>{if(window.confirm("delete ok?")){const e=ae.creatRemoveAction(this,{imagePKforDelete:t});this.dispatch(e)}}}handleDragStart(t){return e=>{const i=e.target;if(!i.classList||!i.classList.contains(this.thumbnail_block))return;i.style.opacity="0.4",this.dragElm=i,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",i.innerHTML);let a=document.createElement("img");a.src=t,a.width=100,e.dataTransfer.setDragImage(a,-10,-10)}}handleDragOver(){return t=>{const e=t.target;if(e.classList&&e.classList.contains(this.thumbnail_block))return t.preventDefault(),t.dataTransfer.dropEffect="move",!1}}handleDragEnter(){return t=>{const e=t.target;e.classList&&e.classList.contains(this.thumbnail_block)&&e.classList.add("over")}}handleDragLeave(){return t=>{const e=t.target;e.classList&&e.classList.contains(this.thumbnail_block)&&e.classList.remove("over")}}handleDrop(t){return t=>{t.stopPropagation(),t.preventDefault();const e=t.target;if(e.classList&&e.classList.contains(this.thumbnail_block)){if(this.dragElm!==e){console.log("sort handleDrop imagePKmove:"+this.dragElm.dataset.pk+"/elm.dataset.pk:"+e.dataset.pk);const t=ae.creatSortImagesAction(this,{imagePKmove:this.dragElm.dataset.pk,imagePKdrop:e.dataset.pk});this.dispatch(t)}return!1}}}handleDragEnd(t){return t=>{const e=t.target;if(!e.classList||!e.classList.contains(this.thumbnail_block))return;e.style.opacity="1";const i=e.parentNode.childNodes;for(let t=0;t<i.length;t++){i[t].classList.remove("over")}}}selectImage(t){return t=>{t.stopPropagation(),t.preventDefault();const e=t.target;console.log("sort selecImage imagePKmove:/elm.dataset.pk:"+e.dataset.pk);const i=ae.creatDetailAction(this,{imagePK:e.dataset.pk});return this.dispatch(i),!1}}async crateDataLine(t){const e=t.imageEntity,i=t.binaryEntity;console.log(i);const a={name:e.name,ab:i._ab,type:e.type},n=await this.ip.createImageNodeByData(a).catch(t=>{throw console.log(t),t}),s=e.getPk(),r=F(s+"_image",e.name,e.name,n.src,{}),o=j(s+"_text",["thumbnail_text"],t.imageText),l=j(s+"_delButton",["delButton"],{on:{click:this.remove(s)}},"x");return U("",[this.thumbnail_block],{on:{dragstart:this.handleDragStart(n.src),dragover:this.handleDragOver(),dragenter:this.handleDragEnter(),dragleave:this.handleDragLeave(),drop:this.handleDrop(),dragend:this.handleDragEnd(),click:this.selectImage()},dataset:{pk:s},props:{draggable:"true","data-pk":s}},[l,U("",["image_block"],[r]),o])}}class Ie extends ${constructor(){super("Thumnails","Thumnails"),this.imageAreaID="thumnailsImageArea",this.thumbnails={},this.thumbnail=new ke(this),this.ip=this.ms.ip}onAfterAttach(t,e){const i=ae.creatLoadImagesAction(this,{});this.dispatch(i)}async onViewShow(t,e){t.imagesData&&(await this.showImages(t.imagesData),console.log("Thumnails onViewShow"))}render(t,e){return U(this.imageAreaID,"Thumnails")}async showImages(t){const e=[];for(let i of t){if(!i)continue;const t=i.imageEntity.getPk();let a=this.thumbnails[t];a||(a=await this.thumbnail.crateDataLine(i).catch(t=>{console.log(t)}),this.thumbnails[t]=a),e.push(a)}this.prePatch("#"+this.imageAreaID,U(this.imageAreaID,e))}}class Ne extends ${constructor(){super("FilesArea","FilesArea"),this.imageDetail=new xe,this.pageImages=new Se,this.thumbnails=new Ie,le.register()}onAfterAttach(t,e){this.imageDetail.attach(this),this.pageImages.attach(this),this.thumbnails.attach(this)}render(){return U("",[U(this.pageImages.id),U(this.thumbnails.id),U(this.imageDetail.id)])}}class Ee extends ${constructor(){super("container","container"),this.fileUploadArea=new de,this.titleSettings=new Pe,this.filesArea=new Ne,this.exportButton=new De,this.progressBar=new ee}onAfterAttach(t,e){this.fileUploadArea.attach(this),this.titleSettings.attach(this),this.filesArea.attach(this),this.exportButton.attach(this),this.progressBar.attach(this)}render(){return U({style:{color:"#000"}},[U(this.fileUploadArea.id),U(this.progressBar.id),U(this.titleSettings.id),U(this.filesArea.id),U(this.exportButton.id)],"container")}}class Ve extends ${constructor(){super("footer","footer"),this.copyright="ryunosinfx"}render(){return U({style:{color:"#000"}},[U("copyright",["copyright"],this.copyright)])}}class Te extends ${constructor(t,e){super("frame","frame"),this.ms=t,$.setMainService(t),this.initialize(e)}initialize(t){this.header=new Z(t),this.footer=new Ve,this.container=new Ee,this.menu=new Q,this.baseFrame=null,this.view="",this.initialPatch()}async onViewShow(t,e){this.header.attach(this,"#header"),this.menu.attach(this,"#menu"),this.container.attach(this,"#container"),this.footer.attach(this,"#footer")}render(t){return U("frame",["frame"],{},[U("header",{style:{color:"#000"}},"hellow!!"),U("menu",{style:{color:"#000"}},"menu!!"),U("container",{style:{color:"#000"}},[U("content",{style:{color:"#000"}},"content!!")],"container!!"),U("footer",{style:{color:"#000"}},"footer!!?")])}}i.d(e,"default",function(){return Oe});const Ce="CopiBon";class Oe{constructor(){this.mainService=Zt.getInstance()}async init(){await this.mainService.init(),this.mf=new Te(this.mainService,Ce)}static main(){(new Oe).init()}}Oe.main()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.htmlDomApi={createElement:function(t){return document.createElement(t)},createElementNS:function(t,e){return document.createElementNS(t,e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,i){t.insertBefore(e,i)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},getTextContent:function(t){return t.textContent},isElement:function(t){return 1===t.nodeType},isText:function(t){return 3===t.nodeType},isComment:function(t){return 8===t.nodeType}},e.default=e.htmlDomApi},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.array=Array.isArray,e.primitive=function(t){return"string"==typeof t||"number"==typeof t}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,a=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,s=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?t:(n=0===s.indexOf("//")?s:0===s.indexOf("/")?i+s:a+s.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(t,e,i){var a={},n=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),s=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var i=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),r=null,o=0,l=[],c=i(15);function h(t,e){for(var i=0;i<t.length;i++){var n=t[i],s=a[n.id];if(s){s.refs++;for(var r=0;r<s.parts.length;r++)s.parts[r](n.parts[r]);for(;r<n.parts.length;r++)s.parts.push(f(n.parts[r],e))}else{var o=[];for(r=0;r<n.parts.length;r++)o.push(f(n.parts[r],e));a[n.id]={id:n.id,refs:1,parts:o}}}}function d(t,e){for(var i=[],a={},n=0;n<t.length;n++){var s=t[n],r=e.base?s[0]+e.base:s[0],o={css:s[1],media:s[2],sourceMap:s[3]};a[r]?a[r].parts.push(o):i.push(a[r]={id:r,parts:[o]})}return i}function u(t,e){var i=s(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var a=l[l.length-1];if("top"===t.insertAt)a?a.nextSibling?i.insertBefore(e,a.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),l.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var n=s(t.insertInto+" "+t.insertAt.before);i.insertBefore(e,n)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function m(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),p(e,t.attrs),u(t,e),e}function p(t,e){Object.keys(e).forEach(function(i){t.setAttribute(i,e[i])})}function f(t,e){var i,a,n,s;if(e.transform&&t.css){if(!(s=e.transform(t.css)))return function(){};t.css=s}if(e.singleton){var l=o++;i=r||(r=m(e)),a=w.bind(null,i,l,!1),n=w.bind(null,i,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",p(e,t.attrs),u(t,e),e}(e),a=function(t,e,i){var a=i.css,n=i.sourceMap,s=void 0===e.convertToAbsoluteUrls&&n;(e.convertToAbsoluteUrls||s)&&(a=c(a));n&&(a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var r=new Blob([a],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}.bind(null,i,e),n=function(){g(i),i.href&&URL.revokeObjectURL(i.href)}):(i=m(e),a=function(t,e){var i=e.css,a=e.media;a&&t.setAttribute("media",a);if(t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),n=function(){g(i)});return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else n()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=n()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var i=d(t,e);return h(i,e),function(t){for(var n=[],s=0;s<i.length;s++){var r=i[s];(o=a[r.id]).refs--,n.push(o)}t&&h(d(t,e),e);for(s=0;s<n.length;s++){var o;if(0===(o=n[s]).refs){for(var l=0;l<o.parts.length;l++)o.parts[l]();delete a[o.id]}}}};var y=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}();function w(t,e,i,a){var n=i?"":a.css;if(t.styleSheet)t.styleSheet.cssText=y(e,n);else{var s=document.createTextNode(n),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(s,r[e]):t.appendChild(s)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||"",a=t[3];if(!a)return i;if(e&&"function"==typeof btoa){var n=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(a),s=a.sources.map(function(t){return"/*# sourceURL="+a.sourceRoot+t+" */"});return[i].concat(s).concat([n]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var a={},n=0;n<this.length;n++){var s=this[n][0];"number"==typeof s&&(a[s]=!0)}for(n=0;n<t.length;n++){var r=t[n];"number"==typeof r[0]&&a[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),e.push(r))}},e}},function(t,e,i){(t.exports=i(17)(!1)).push([t.i,"html, body {\n  min-height: 100%;\n  width: 100%;\n  padding: 0;\n  margin: 0;\n}\n\ndiv {\n  box-sizing: border-box;\n}\n\ndiv.frame {\n  min-height: 99%;\n  width: 100%;\n  margin-left: auto;\n  margin-right: auto;\n  margin: 0;\n  border: solid 1px blue;\n}\n\ndiv.footer {\n  min-height: 100%;\n  width: 100%;\n  border: solid 1px red;\n  padding: 0.5em;\n}\n\ndiv.copyright {\n  width: 100%;\n  padding: 0.5em;\n  text-align: center;\n}\n\ndiv.header {\n  min-height: 100%;\n  width: 100%;\n  border: solid 1px green;\n  padding: 0.2em;\n}\n\ndiv.title {\n  font-size: 2em;\n  font-weight: bold;\n  background-color: #c23cc1;\n  padding: 0.5em;\n}\n\ndiv.FileUploadArea input {\n  position: absolute;\n  left: -100;\n}\n\ndiv.FileUploadArea {\n  display: block;\n  min-height: 100%;\n  width: 100%;\n  border: dotted 1px black;\n  background-color: #a8bae0;\n  padding-top: 5em;\n  padding-bottom: 5em;\n  text-align: center;\n  font-size: 2em;\n}\n\ninput.FileUploadFile {\n  position: absolute;\n  top: -10em;\n  left: 10em;\n  visibility: hidden;\n}\n\ndiv.FilesArea {\n  min-height: 100%;\n  width: 100%;\n  border: dotted 1px black;\n  background-color: rgb(124, 110, 241);\n  padding-top: 1em;\n  padding-bottom: 1em;\n  text-align: center;\n  font-size: 2em;\n}\n\nspan.imageDataLine {\n  display: inline-block;\n  font-size: 50%;\n  padding: 0.2em;\n}\n\ndiv.delButton {\n  display: inline-block;\n  font-size: 50%;\n  width: 3em;\n  padding: 0.2em;\n  line-height: 1em;\n  text-align: center;\n  cursor: pointer;\n  background-color: #675275;\n}\n\ndiv.delButton:active {\n  color: red;\n}\n\ndiv.delButton:hover {\n  color: #d48a60;\n  background-color: #7b4f99;\n}\n\ncanvas.hidden {\n  position: absolute;\n  top: -10000px;\n}\n\n[draggable] {\n  user-select: none;\n}\n\n.column {\n  height: 150px;\n  width: 150px;\n  float: left;\n  border: 2px solid #666666;\n  background-color: #ccc;\n  margin-right: 5px;\n  border-radius: 10px;\n  box-shadow: inset 0 0 3px #000;\n  text-align: center;\n  cursor: move;\n}\n\n.column.over {\n  border: 2px dashed #000;\n}\n\n.column header {\n  color: #fff;\n  text-shadow: #000 0 1px;\n  box-shadow: 5px;\n  border-bottom: 1px solid #ddd;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n}\n\n.FilesArea>div {\n  width: 100%;\n  min-width: 630px;\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n}\n\n.FilesArea>div>div {\n  display: flex;\n  min-width: 160px;\n  overflow: hidden;\n}\n.FilesArea>div>div.PageImages{\n  min-width: 320px;\n  max-width: 50%;\n}\n.FilesArea>div>div.ImageDetail {\n  min-width: 160px;\n  max-width: 25%;\n}\n\n.ImageDetail .ImageDetailTitle {\n  position: relative;\n  z-index: 1000;\n  font-size: 12px;\n  background-color: rgb(227, 169, 159);\n  text-align: left;\n  padding: 10px;\n}\n\n.Thumnails {\n  flex-direction: column;\n}\n\n.thumbnail_block {\n  display: flex;\n  flex-direction: column;\n  background-color: green;\n  border: 1px solid #fdd;\n  width: 150px;\n  cursor: pointer;\n}\n\n.thumbnail_block.over {\n  background-color: rgba(24, 129, 12, 0.8);\n  width: 148px;\n  border: 2px dotted #dfd;\n}\n\n.thumbnail_block div {\n  display: flex;\n  height: auto;\n  margin: auto;\n}\n\n.thumbnail_text {\n  display: block;\n  background-color: blue;\n  border: 1px solid #fdd;\n  font-size: 0.5em\n}\n\n.image_detail_block {\n  position: relative;\n  top: -10px;\n  left: -30px;\n}\n.ProgressBar{\n  top:0;\n  left:0;\n  position: fixed;\n  width: 100%;\n  height:100%;\n  background-color:rgba(118, 118, 118, 0.80);\n  z-index: 1001;\n  display:none;\n}\n.ProgressBar> div{\n  position: fixed;\n  top:50%;\n  left:5%;\n  margin:0 auto;\n  width: 90%;\n  height:5em;\n  background-color:rgba(238, 118, 238, 1);\n  z-index: 1000;\n  padding:10px\n}\n.ProgressBar> div .progeressFrame{\n  margin:0 auto;\n  width: 95%;\n  height:3em;\n  background-color:rgb(193, 165, 200);\n  z-index: 1000;\n  padding:0px\n}\n.progeress{\n  position: relative;\n  top:0;\n  left: 0;\n  height:3em;\n  background-color:rgb(120, 231, 194);\n}\n.TitleSettings{\n  background-color: rgb(159, 117, 242);\n  padding:0.1em;\n  margin: 0.1em 0;\n}\n.TitleSettingsTitle{\n  padding:0.3em;\n    margin-bottom: 0.3em;\n  font-weight: bold;\n  font-size: 110%;\n  width:100%;\n  text-align: center;\n    background-color: rgb(139, 87, 242);\n}\n.TitleSettingsFrame{\n  display: flex;\n}\n.TitleSettingsFrame > div{\n  width:50%;\n\n}\n.TitleSettingsRow>span,.TitleSettingsRow>input{\n  display: inline-flex;\n  width:40%;\n}\n.TitleSettingsUpdate{\n  width:70%;\n  background-color: rgb(3, 21, 186);\n  color:white;\n  font-weight: bold;\n  text-align: center;\n  margin: 0.5em auto;\n  padding:0.5em;\n  border-radius: 1em;\n  cursor: pointer;\n}\n.previewFrame{\n  display: flex;\n}\n .previewCallButton{\n  width:150px;\n  background-color: rgb(156, 111, 146);\n  font-size: 50%;\n  padding :10px;\n  margin:1px;\n  cursor: pointer;\n  border-radius: 5px;\n}\n.pageFrameHeader{\n  font-size: 60%;\n  background-color: rgb(59, 2, 62);\n  color:white;\n  padding:5px;\n}\n.pageFrameHeaderLeft{\n  text-align: left;\n}\n.pageFrameHeaderRight{\n  text-align: right;\n}\n.PageFrame{\n  display:inline-block;\n    display: flex;\n  background-color:rgb(166, 121, 191);\n  width:300px;\n  height:150px;\n  font-size:1em;\n  margin: 0.1em auto;\n  padding:0.25em 1em;\n}\n.PageFrame .Page{\n  width:110px;\n  border:2px solid rgb(126, 100, 113);\n  background-color:rgb(172, 148, 185);\n  height:130px;\n  margin: 0.0em auto;\n}\n.PageFrame .Dummy{\n  background-color:rgb(106, 91, 115);\n}\n.MenuFrame{\n  display:flex;\n}\n.MenuFrame div{\n  width:20%;\n  cursor: pointer;\n  padding:5px 10px;\n  margin:2px 1px 0 1px;\n  border:1px solid rgb(83, 122, 134);\n  border-bottom-width: 0;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  background-color: rgb(170, 185, 210);\n  color:rgb(222, 240, 222)\n}\n",""])},function(t,e,i){var a=i(18);"string"==typeof a&&(a=[[t.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};i(16)(a,n);a.locals&&(t.exports=a.locals)}]);
//# sourceMappingURL=bundle.js.map